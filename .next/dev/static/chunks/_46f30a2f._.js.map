{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/pusher.ts"],"sourcesContent":["import Pusher from 'pusher';\nimport PusherJs from 'pusher-js';\n\n// Server-side Pusher instance\nexport const pusher = new Pusher({\n  appId: process.env.NEXT_PUBLIC_PUSHER_APP_ID || '',\n  key: process.env.NEXT_PUBLIC_PUSHER_KEY || '',\n  secret: process.env.PUSHER_SECRET || '',\n  cluster: process.env.NEXT_PUBLIC_PUSHER_CLUSTER || 'mt1',\n  useTLS: true,\n});\n\n// Client-side Pusher instance\nexport const getPusherClient = () => {\n  if (typeof window === 'undefined') return null;\n  \n  const pusherClient = new PusherJs(\n    process.env.NEXT_PUBLIC_PUSHER_KEY || '',\n    {\n      cluster: process.env.NEXT_PUBLIC_PUSHER_CLUSTER || 'mt1',\n      forceTLS: true,\n    }\n  );\n  \n  return pusherClient;\n};\n\n// Channel names\nexport const CHANNELS = {\n  STUDENTS: 'students',\n  BALANCE_UPDATE: (studentId: string) => `balance-${studentId}`,\n  ADMIN: 'admin-channel',\n};\n"],"names":[],"mappings":";;;;;;;;AAKS;AALT;AACA;;;AAGO,MAAM,SAAS,IAAI,qJAAM,CAAC;IAC/B,OAAO,+CAAyC;IAChD,KAAK,4DAAsC;IAC3C,QAAQ,2KAAO,CAAC,GAAG,CAAC,aAAa,IAAI;IACrC,SAAS,2CAA0C;IACnD,QAAQ;AACV;AAGO,MAAM,kBAAkB;IAC7B;;IAEA,MAAM,eAAe,IAAI,mKAAQ,CAC/B,4DAAsC,IACtC;QACE,SAAS,2CAA0C;QACnD,UAAU;IACZ;IAGF,OAAO;AACT;AAGO,MAAM,WAAW;IACtB,UAAU;IACV,gBAAgB,CAAC,YAAsB,CAAC,QAAQ,EAAE,WAAW;IAC7D,OAAO;AACT"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/hooks/usePusher.ts"],"sourcesContent":["import { useEffect, useCallback } from 'react';\nimport { getPusherClient, CHANNELS } from '@/lib/pusher';\n\nexport function usePusherUpdates(studentId?: string, onUpdate?: (data: any) => void) {\n  useEffect(() => {\n    const pusher = getPusherClient();\n    if (!pusher) return;\n\n    if (studentId) {\n      // Subscribe to balance updates for specific student\n      const channel = pusher.subscribe(CHANNELS.BALANCE_UPDATE(studentId));\n\n      channel.bind('balance-changed', (data: any) => {\n        if (onUpdate) onUpdate({ type: 'balance-changed', ...data });\n      });\n\n      channel.bind('transaction-added', (data: any) => {\n        if (onUpdate) onUpdate({ type: 'transaction-added', ...data });\n      });\n\n      return () => {\n        channel.unbind_all();\n        pusher.unsubscribe(CHANNELS.BALANCE_UPDATE(studentId));\n      };\n    }\n  }, [studentId, onUpdate]);\n}\n\nexport function usePusherAdminUpdates(onUpdate?: (data: any) => void) {\n  useEffect(() => {\n    const pusher = getPusherClient();\n    if (!pusher) return;\n\n    const channel = pusher.subscribe(CHANNELS.STUDENTS);\n\n    channel.bind('list-updated', (data: any) => {\n      if (onUpdate) onUpdate({ type: 'list-updated', ...data });\n    });\n\n    return () => {\n      channel.unbind_all();\n      pusher.unsubscribe(CHANNELS.STUDENTS);\n    };\n  }, [onUpdate]);\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;AAEO,SAAS,iBAAiB,SAAkB,EAAE,QAA8B;;IACjF,IAAA,0KAAS;sCAAC;YACR,MAAM,SAAS,IAAA,mIAAe;YAC9B,IAAI,CAAC,QAAQ;YAEb,IAAI,WAAW;gBACb,oDAAoD;gBACpD,MAAM,UAAU,OAAO,SAAS,CAAC,4HAAQ,CAAC,cAAc,CAAC;gBAEzD,QAAQ,IAAI,CAAC;kDAAmB,CAAC;wBAC/B,IAAI,UAAU,SAAS;4BAAE,MAAM;4BAAmB,GAAG,IAAI;wBAAC;oBAC5D;;gBAEA,QAAQ,IAAI,CAAC;kDAAqB,CAAC;wBACjC,IAAI,UAAU,SAAS;4BAAE,MAAM;4BAAqB,GAAG,IAAI;wBAAC;oBAC9D;;gBAEA;kDAAO;wBACL,QAAQ,UAAU;wBAClB,OAAO,WAAW,CAAC,4HAAQ,CAAC,cAAc,CAAC;oBAC7C;;YACF;QACF;qCAAG;QAAC;QAAW;KAAS;AAC1B;GAvBgB;AAyBT,SAAS,sBAAsB,QAA8B;;IAClE,IAAA,0KAAS;2CAAC;YACR,MAAM,SAAS,IAAA,mIAAe;YAC9B,IAAI,CAAC,QAAQ;YAEb,MAAM,UAAU,OAAO,SAAS,CAAC,4HAAQ,CAAC,QAAQ;YAElD,QAAQ,IAAI,CAAC;mDAAgB,CAAC;oBAC5B,IAAI,UAAU,SAAS;wBAAE,MAAM;wBAAgB,GAAG,IAAI;oBAAC;gBACzD;;YAEA;mDAAO;oBACL,QAAQ,UAAU;oBAClB,OAAO,WAAW,CAAC,4HAAQ,CAAC,QAAQ;gBACtC;;QACF;0CAAG;QAAC;KAAS;AACf;IAhBgB"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/admin/dashboard/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport Link from \"next/link\"\nimport { Home, Users, CreditCard, MoreHorizontal, Send, QrCode, Bell, Grid3X3, ArrowDownRight, ArrowUpRight, Wallet, Plus, X, Camera, Trophy, Edit, Trash2, BarChart3, Sparkles, HelpCircle, MessageSquare, Settings, LogOut, Share2, Star, Lock, Info, ChevronLeft, Activity, Moon, Sun, Download, Calendar, AlertCircle, Zap, Search, Upload, CalendarRange, Loader } from \"lucide-react\"\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, ResponsiveContainer } from \"recharts\"\nimport { useTheme } from \"next-themes\"\nimport jsPDF from \"jspdf\"\nimport * as XLSX from \"xlsx\"\nimport { toast } from \"sonner\"\nimport { defaultStudents } from \"@/lib/students\"\nimport { usePusherAdminUpdates } from \"@/lib/hooks/usePusher\"\n\ninterface Transaction {\n  type: string\n  amount: number\n  date?: string\n  reason?: string\n  academicYear?: string\n}\n\ninterface Student {\n  _id?: string\n  id?: string\n  name: string\n  code?: string\n  mobile?: string\n  email?: string\n  username?: string\n  password?: string\n  profileImage?: string\n  academicYear?: string\n  balance: number\n  transactions: Transaction[]\n}\n\nconst avatarColors = ['bg-orange-100', 'bg-blue-100', 'bg-green-100', 'bg-purple-100', 'bg-pink-100']\n\nexport default function AdminDashboard() {\n  const router = useRouter()\n  const { theme, setTheme } = useTheme()\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const [isAuthLoading, setIsAuthLoading] = useState(true)\n  const [activeTab, setActiveTab] = useState(\"home\")\n  const [currentDate, setCurrentDate] = useState(\"\")\n  const [totalBalance, setTotalBalance] = useState(0)\n  const [totalDeposited, setTotalDeposited] = useState(0)\n  const [totalWithdrawn, setTotalWithdrawn] = useState(0)\n  const [academicYears, setAcademicYears] = useState([\"2023-24\", \"2024-25\", \"2025-26\", \"2026-27\"])\n  const [showAddYearForm, setShowAddYearForm] = useState(false)\n  const [newYearInput, setNewYearYearInput] = useState(\"\")\n  const [students, setStudents] = useState<Student[]>([])\n  const [showCreateForm, setShowCreateForm] = useState(false)\n  const [useOldCode, setUseOldCode] = useState(false)\n  const [oldStudentCode, setOldStudentCode] = useState(\"\")\n  const [isSearchingOldStudent, setIsSearchingOldStudent] = useState(false)\n  const [showEditForm, setShowEditForm] = useState(false)\n  const [editingIndex, setEditingIndex] = useState<number | null>(null)\n  const [viewingIndex, setViewingIndex] = useState<number | null>(null)\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false)\n  const [deletingIndex, setDeletingIndex] = useState<number | null>(null)\n  const [editingTransaction, setEditingTransaction] = useState<{ studentIndex: number, transactionIndex: number } | null>(null)\n  const [editTxAmount, setEditTxAmount] = useState(\"\")\n  const [editTxDate, setEditTxDate] = useState(\"\")\n  const [editTxReason, setEditTxReason] = useState(\"\")\n  const [selectedAcademicYear, setSelectedAcademicYear] = useState(\"2025-26\")\n  const [showAllSessions, setShowAllSessions] = useState(false)\n  const [newStudent, setNewStudent] = useState({\n    name: \"\",\n    mobile: \"\",\n    email: \"\",\n    profileImage: \"\",\n    academicYear: \"2025-26\"\n  })\n  const [adminName, setAdminName] = useState(\"\")\n  const [adminUsername, setAdminUsername] = useState(\"\")\n  const [adminPassword, setAdminPassword] = useState(\"\")\n  const [adminRating, setAdminRating] = useState(0)\n  const [showPasswordReset, setShowPasswordReset] = useState(false)\n  const [currentPassword, setCurrentPassword] = useState(\"\")\n  const [newPassword, setNewPassword] = useState(\"\")\n  const [confirmPassword, setConfirmPassword] = useState(\"\")\n  const [showLogoutConfirm, setShowLogoutConfirm] = useState(false)\n  const [systemStatus, setSystemStatus] = useState<any>(null)\n  const [mongoHealth, setMongoHealth] = useState(0)\n  const [cpuHealth, setCpuHealth] = useState(0)\n  const setRealTimeStatus = (status: any) => {\n    setSystemStatus(status);\n    if (typeof status === 'object' && status !== null) {\n      if (status.cpu?.percentage !== undefined) setCpuHealth(100 - status.cpu.percentage);\n      if (status.mongodb?.percentage !== undefined) setMongoHealth(100 - status.mongodb.percentage);\n    }\n  }\n  const [showDepositModal, setShowDepositModal] = useState(false)\n  const [showWithdrawModal, setShowWithdrawModal] = useState(false)\n  const [transactionAmount, setTransactionAmount] = useState(\"\")\n  const [transactionDate, setTransactionDate] = useState(new Date().toISOString().split('T')[0])\n  const [transactionReason, setTransactionReason] = useState(\"\")\n  const [selectedStudentIndex, setSelectedStudentIndex] = useState<number | null>(null)\n  const [notification, setNotification] = useState<{type: 'success' | 'error', message: string} | null>(null)\n  const [showDepositDropdown, setShowDepositDropdown] = useState(false)\n  const [showWithdrawDropdown, setShowWithdrawDropdown] = useState(false)\n  const [reportType, setReportType] = useState<'date' | 'monthly' | 'yearly' | 'personal'>('date')\n  const [startDate, setStartDate] = useState(new Date(2025, 11, 1).toISOString().split('T')[0])\n  const [endDate, setEndDate] = useState(new Date().toISOString().split('T')[0])\n  const [selectedMonth, setSelectedMonth] = useState(new Date().toISOString().slice(0, 7))\n  const [selectedYear, setSelectedYear] = useState(new Date().getFullYear().toString())\n  const [selectedPersonalStudent, setSelectedPersonalStudent] = useState<number | null>(null)\n  const [studentSearchQuery, setStudentSearchQuery] = useState(\"\")\n  const [aiInput, setAiInput] = useState(\"\")\n  const [aiMessages, setAiMessages] = useState<any[]>([])\n  const [aiLoading, setAiLoading] = useState(false)\n  const [depositAllStudents, setDepositAllStudents] = useState(false)\n  const [withdrawAllStudents, setWithdrawAllStudents] = useState(false)\n\n  const [showQRScanner, setShowQRScanner] = useState(false)\n  const [qrScannerStep, setQrScannerStep] = useState<'scan' | 'result'>('scan')\n  const [scannedStudent, setScannedStudent] = useState<Student | null>(null)\n\n  const handleDeposit = async () => {\n    if (!transactionAmount || isNaN(parseFloat(transactionAmount)) || parseFloat(transactionAmount) <= 0) {\n      setNotification({ type: 'error', message: 'Please enter a valid amount' })\n      setTimeout(() => setNotification(null), 3000)\n      return\n    }\n    \n    if (!depositAllStudents && selectedStudentIndex === null) {\n      setNotification({ type: 'error', message: 'Please select a student' })\n      setTimeout(() => setNotification(null), 3000)\n      return\n    }\n    \n    try {\n      const amount = parseFloat(transactionAmount)\n      const updatedStudents = [...students]\n      const targetStudents = depositAllStudents ? updatedStudents : [updatedStudents[selectedStudentIndex!]]\n      \n      for (const student of targetStudents) {\n        if (!student._id) continue\n        \n        student.balance += amount\n        student.transactions.push({\n          type: 'deposit',\n          amount: amount,\n          date: new Date(transactionDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }),\n          reason: transactionReason || undefined,\n          academicYear: selectedAcademicYear\n        })\n        \n        if (student.transactions.length > 100) {\n          student.transactions = student.transactions.slice(-100)\n        }\n        \n        // Update in database\n        await fetch(`/api/students/${student._id}`, {\n          method: 'PATCH',\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(student)\n        })\n        \n        // Save to deposits collection\n        try {\n          await fetch('/api/transactions/deposits', {\n            method: 'POST',\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({\n              studentId: student._id,\n              studentName: student.name,\n              studentCode: student.code,\n              amount: amount,\n              date: transactionDate,\n              reason: transactionReason || undefined\n            })\n          })\n        } catch (err) {\n          console.error('Deposit record error:', err)\n        }\n        \n        // Broadcast real-time update\n        try {\n          await fetch('/api/pusher/broadcast', {\n            method: 'POST',\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({\n              type: 'balance-update',\n              studentId: student._id,\n              update: {\n                balance: student.balance,\n                amount: amount\n              }\n            })\n          })\n        } catch (err) {\n          console.error('Broadcast error:', err)\n        }\n      }\n      \n      setStudents(updatedStudents)\n      calculateTotals(updatedStudents)\n      \n      setShowDepositModal(false)\n      setTransactionAmount(\"\")\n      setTransactionDate(new Date().toISOString().split('T')[0])\n      setTransactionReason(\"\")\n      setSelectedStudentIndex(null)\n      setDepositAllStudents(false)\n      const message = depositAllStudents ? `Deposit of ₹${amount.toFixed(2)} to all ${students.length} students successful!` : `Deposit of ₹${amount.toFixed(2)} successful!`\n      setNotification({ type: 'success', message })\n      setTimeout(() => setNotification(null), 3000)\n    } catch (error) {\n      setNotification({ type: 'error', message: 'Failed to process deposit' })\n      setTimeout(() => setNotification(null), 3000)\n      console.error('Deposit error:', error)\n    }\n  }\n\n  const handleWithdraw = async () => {\n    if (!transactionAmount || isNaN(parseFloat(transactionAmount)) || parseFloat(transactionAmount) <= 0) {\n      setNotification({ type: 'error', message: 'Please enter a valid amount' })\n      setTimeout(() => setNotification(null), 3000)\n      return\n    }\n    \n    if (!withdrawAllStudents && selectedStudentIndex === null) {\n      setNotification({ type: 'error', message: 'Please select a student' })\n      setTimeout(() => setNotification(null), 3000)\n      return\n    }\n    \n    try {\n      const amount = parseFloat(transactionAmount)\n      const updatedStudents = [...students]\n      const targetStudents = withdrawAllStudents ? updatedStudents : [updatedStudents[selectedStudentIndex!]]\n      \n      for (const student of targetStudents) {\n        if (!student._id) continue\n        \n        if (student.balance < amount) {\n          if (!withdrawAllStudents) {\n            setNotification({ type: 'error', message: `Insufficient balance. Available: ₹${student.balance.toFixed(2)}` })\n            setTimeout(() => setNotification(null), 3000)\n            return\n          }\n          continue\n        }\n        \n        student.balance -= amount\n        student.transactions.push({\n          type: 'withdraw',\n          amount: amount,\n          date: new Date(transactionDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }),\n          reason: transactionReason || undefined,\n          academicYear: selectedAcademicYear\n        })\n        \n        if (student.transactions.length > 100) {\n          student.transactions = student.transactions.slice(-100)\n        }\n        \n        // Update in database\n        await fetch(`/api/students/${student._id}`, {\n          method: 'PATCH',\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(student)\n        })\n        \n        // Save to withdrawals collection\n        try {\n          await fetch('/api/transactions/withdrawals', {\n            method: 'POST',\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({\n              studentId: student._id,\n              studentName: student.name,\n              studentCode: student.code,\n              amount: amount,\n              date: transactionDate,\n              reason: transactionReason || undefined\n            })\n          })\n        } catch (err) {\n          console.error('Withdrawal record error:', err)\n        }\n        \n        // Broadcast real-time update\n        try {\n          await fetch('/api/pusher/broadcast', {\n            method: 'POST',\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({\n              type: 'balance-update',\n              studentId: student._id,\n              update: {\n                balance: student.balance,\n                amount: amount\n              }\n            })\n          })\n        } catch (err) {\n          console.error('Broadcast error:', err)\n        }\n      }\n      \n      setStudents(updatedStudents)\n      calculateTotals(updatedStudents)\n      \n      setShowWithdrawModal(false)\n      setTransactionAmount(\"\")\n      setTransactionDate(new Date().toISOString().split('T')[0])\n      setTransactionReason(\"\")\n      setSelectedStudentIndex(null)\n      setWithdrawAllStudents(false)\n      const message = withdrawAllStudents ? `Withdrawal of ₹${amount.toFixed(2)} from all eligible students successful!` : `Withdrawal of ₹${amount.toFixed(2)} successful!`\n      setNotification({ type: 'success', message })\n      setTimeout(() => setNotification(null), 3000)\n    } catch (error) {\n      setNotification({ type: 'error', message: 'Failed to process withdrawal' })\n      setTimeout(() => setNotification(null), 3000)\n      console.error('Withdrawal error:', error)\n    }\n  }\n\n  const filterTransactionsByDate = (student: Student, start: Date, end: Date) => {\n    return student.transactions.filter(t => {\n      if (!t.date) return false\n      const tDate = new Date(t.date)\n      return tDate >= start && tDate <= end\n    })\n  }\n\n  const generateDateReport = () => {\n    const start = new Date(startDate)\n    const end = new Date(endDate)\n    const reportData: any[] = []\n    \n    students.forEach(student => {\n      const filtered = filterTransactionsByDate(student, start, end)\n      const deposits = filtered.filter(t => t.type === 'deposit').reduce((sum, t) => sum + t.amount, 0)\n      const withdraws = filtered.filter(t => t.type === 'withdraw').reduce((sum, t) => sum + t.amount, 0)\n      \n      reportData.push({\n        'Student': student.name,\n        'Username': student.username,\n        'Deposits': deposits.toFixed(2),\n        'Withdrawals': withdraws.toFixed(2),\n        'Net Change': (deposits - withdraws).toFixed(2),\n        'Final Balance': student.balance.toFixed(2)\n      })\n    })\n    return reportData\n  }\n\n  const generateMonthlyReport = () => {\n    const [year, month] = selectedMonth.split('-')\n    const start = new Date(parseInt(year), parseInt(month) - 1, 1)\n    const end = new Date(parseInt(year), parseInt(month), 0)\n    return generateDateReport()\n  }\n\n  const generateYearlyReport = () => {\n    const year = parseInt(selectedYear)\n    const start = new Date(year, 0, 1)\n    const end = new Date(year, 11, 31)\n    setStartDate(start.toISOString().split('T')[0])\n    setEndDate(end.toISOString().split('T')[0])\n    return generateDateReport()\n  }\n\n  const generatePersonalReport = () => {\n    if (selectedPersonalStudent === null) return []\n    const student = students[selectedPersonalStudent]\n    if (!student) return []\n    \n    return student.transactions.map((t, idx) => ({\n      'S.No': (idx + 1).toString(),\n      'Type': t.type.charAt(0).toUpperCase() + t.type.slice(1),\n      'Amount': t.amount.toFixed(2),\n      'Date': t.date || 'N/A'\n    }))\n  }\n\n  const getReportData = () => {\n    if (reportType === 'date') return generateDateReport()\n    if (reportType === 'monthly') return generateMonthlyReport()\n    if (reportType === 'yearly') return generateYearlyReport()\n    return generatePersonalReport()\n  }\n\n  const downloadPDF = () => {\n    const data = getReportData()\n    if (data.length === 0) {\n      setNotification({ type: 'error', message: 'No data available for this report' })\n      setTimeout(() => setNotification(null), 3000)\n      return\n    }\n\n    const doc = new jsPDF()\n    const pageHeight = doc.internal.pageSize.getHeight()\n    const pageWidth = doc.internal.pageSize.getWidth()\n    const margin = 10\n    const lineHeight = 7\n    let yPosition = 20\n\n    doc.setFontSize(16)\n    doc.text('JDSA Students Bank Report', margin, yPosition)\n    yPosition += 10\n\n    doc.setFontSize(10)\n    const reportTitle = reportType === 'date' ? `Date Range: ${startDate} to ${endDate}` :\n                       reportType === 'monthly' ? `Monthly Report: ${selectedMonth}` :\n                       reportType === 'yearly' ? `Yearly Report: ${selectedYear}` :\n                       `Personal Report: ${students[selectedPersonalStudent!]?.name || 'N/A'}`\n    doc.text(reportTitle, margin, yPosition)\n    yPosition += 8\n\n    const columns = Object.keys(data[0])\n    const rows = data.map(item => Object.values(item).map(v => String(v)))\n\n    doc.setFontSize(9)\n    let colWidth = (pageWidth - 2 * margin) / columns.length\n    \n    columns.forEach((col, idx) => {\n      doc.text(col, margin + idx * colWidth, yPosition)\n    })\n    yPosition += lineHeight\n\n    doc.setFontSize(8)\n    rows.forEach(row => {\n      if (yPosition + lineHeight > pageHeight - margin) {\n        doc.addPage()\n        yPosition = margin\n      }\n      row.forEach((cell, idx) => {\n        doc.text(String(cell).substring(0, 10), margin + idx * colWidth, yPosition)\n      })\n      yPosition += lineHeight\n    })\n\n    doc.save(`JDSA_Report_${reportType}_${new Date().toISOString().split('T')[0]}.pdf`)\n    setNotification({ type: 'success', message: 'PDF downloaded successfully!' })\n    setTimeout(() => setNotification(null), 3000)\n  }\n\n  const downloadExcel = () => {\n    const data = getReportData()\n    if (data.length === 0) {\n      setNotification({ type: 'error', message: 'No data available for this report' })\n      setTimeout(() => setNotification(null), 3000)\n      return\n    }\n\n    const ws = XLSX.utils.json_to_sheet(data)\n    const wb = XLSX.utils.book_new()\n    XLSX.utils.book_append_sheet(wb, ws, 'Report')\n    XLSX.writeFile(wb, `JDSA_Report_${reportType}_${new Date().toISOString().split('T')[0]}.xlsx`)\n    \n    setNotification({ type: 'success', message: 'Excel file downloaded successfully!' })\n    setTimeout(() => setNotification(null), 3000)\n  }\n\n  const renderReportsTab = () => (\n    <>\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <button onClick={() => setActiveTab(\"home\")} className=\"p-2 hover:bg-[#f0f0f0] dark:hover:bg-slate-700 rounded-lg transition-colors\">\n            <ChevronLeft className=\"w-5 h-5 text-[#4a6670] dark:text-gray-300\" />\n          </button>\n          <h2 className=\"text-lg font-bold text-[#171532] dark:text-white\">Reports</h2>\n        </div>\n        <button \n          onClick={() => setTheme(theme === 'dark' ? 'light' : 'dark')}\n          className=\"p-2 hover:bg-[#f0f0f0] dark:hover:bg-slate-700 rounded-lg transition-colors\"\n        >\n          {theme === 'dark' ? (\n            <Sun className=\"w-5 h-5 text-[#f39c12] dark:text-[#f39c12]\" />\n          ) : (\n            <Moon className=\"w-5 h-5 text-[#4a6670]\" />\n          )}\n        </button>\n      </div>\n\n      <div className=\"space-y-6\">\n            <div className=\"bg-white dark:bg-slate-800 rounded-2xl p-5 border border-gray-200 dark:border-slate-700\">\n              <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-3\">Academic Year</label>\n              <select\n                value={selectedAcademicYear}\n                onChange={(e) => setSelectedAcademicYear(e.target.value)}\n                className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl text-[#171532] dark:text-white\"\n              >\n                <option value=\"2023-24\">2023-24</option>\n                <option value=\"2024-25\">2024-25</option>\n                <option value=\"2025-26\">2025-26</option>\n                <option value=\"2026-27\">2026-27</option>\n                {academicYears.filter(y => ![\"2023-24\", \"2024-25\", \"2025-26\", \"2026-27\"].includes(y)).map(year => (\n                  <option key={year} value={year}>{year}</option>\n                ))}\n              </select>\n            </div>\n\n            <div className=\"bg-white dark:bg-slate-800 rounded-2xl p-5 border border-gray-200 dark:border-slate-700\">\n              <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-3\">Report Type</label>\n          <select\n            value={reportType}\n            onChange={(e) => setReportType(e.target.value as any)}\n            className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl text-[#171532] dark:text-white\"\n          >\n            <option value=\"date\">Selected Date Range</option>\n            <option value=\"monthly\">Monthly Report</option>\n            <option value=\"yearly\">Yearly Report</option>\n            <option value=\"personal\">Individual Student</option>\n          </select>\n        </div>\n\n        {reportType === 'date' && (\n          <div className=\"grid grid-cols-2 gap-4 bg-white dark:bg-slate-800 rounded-2xl p-5 border border-gray-200 dark:border-slate-700\">\n            <div>\n              <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-2\">Start Date</label>\n              <input\n                type=\"date\"\n                value={startDate}\n                onChange={(e) => setStartDate(e.target.value)}\n                className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl text-[#171532] dark:text-white\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-2\">End Date</label>\n              <input\n                type=\"date\"\n                value={endDate}\n                onChange={(e) => setEndDate(e.target.value)}\n                className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl text-[#171532] dark:text-white\"\n              />\n            </div>\n          </div>\n        )}\n\n        {reportType === 'monthly' && (\n          <div className=\"bg-white dark:bg-slate-800 rounded-2xl p-5 border border-gray-200 dark:border-slate-700\">\n            <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-3\">Select Month</label>\n            <input\n              type=\"month\"\n              value={selectedMonth}\n              onChange={(e) => setSelectedMonth(e.target.value)}\n              className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl text-[#171532] dark:text-white\"\n            />\n          </div>\n        )}\n\n        {reportType === 'yearly' && (\n          <div className=\"bg-white dark:bg-slate-800 rounded-2xl p-5 border border-gray-200 dark:border-slate-700\">\n            <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-3\">Select Year</label>\n            <select\n              value={selectedYear}\n              onChange={(e) => setSelectedYear(e.target.value)}\n              className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl text-[#171532] dark:text-white\"\n            >\n              {[2023, 2024, 2025].map(year => (\n                <option key={year} value={year}>{year}</option>\n              ))}\n            </select>\n          </div>\n        )}\n\n        {reportType === 'personal' && (\n          <div className=\"bg-white dark:bg-slate-800 rounded-2xl p-5 border border-gray-200 dark:border-slate-700\">\n            <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-3\">Select Student</label>\n            <select\n              value={selectedPersonalStudent ?? \"\"}\n              onChange={(e) => setSelectedPersonalStudent(parseInt(e.target.value))}\n              className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl text-[#171532] dark:text-white\"\n            >\n              <option value=\"\">Choose a student...</option>\n              {students.map((student, idx) => (\n                <option key={idx} value={idx}>{student.name}</option>\n              ))}\n            </select>\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-2 gap-3\">\n          <button\n            onClick={downloadPDF}\n            className=\"flex items-center justify-center gap-2 bg-[#EF4444] hover:bg-[#dc2626] text-white px-4 py-2.5 rounded-lg font-medium text-sm transition-colors shadow-md\"\n          >\n            <Download className=\"w-4 h-4\" />\n            PDF\n          </button>\n          <button\n            onClick={downloadExcel}\n            className=\"flex items-center justify-center gap-2 bg-[#10B981] hover:bg-[#0fa06f] text-white px-4 py-2.5 rounded-lg font-medium text-sm transition-colors shadow-md\"\n          >\n            <Download className=\"w-4 h-4\" />\n            Excel\n          </button>\n        </div>\n      </div>\n    </>\n  )\n\n  const renderNotification = () => {\n    if (!notification) return null\n    return (\n      <div className=\"fixed top-6 right-6 z-[60] animate-in fade-in slide-in-from-top-2 duration-300\">\n        <div className={`rounded-xl px-6 py-4 shadow-xl backdrop-blur-sm border ${\n          notification.type === 'success' \n            ? 'bg-[#10B981]/95 border-[#10B981] text-white' \n            : 'bg-[#EF4444]/95 border-[#EF4444] text-white'\n        }`}>\n          <div className=\"flex items-center gap-3\">\n            {notification.type === 'success' ? (\n              <div className=\"w-5 h-5 rounded-full bg-white/30 flex items-center justify-center\">\n                <span className=\"text-sm font-bold\">✓</span>\n              </div>\n            ) : (\n              <div className=\"w-5 h-5 rounded-full bg-white/30 flex items-center justify-center\">\n                <span className=\"text-sm font-bold\">!</span>\n              </div>\n            )}\n            <p className=\"font-medium text-sm\">{notification.message}</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n\n  const renderDepositModal = () => {\n    if (!showDepositModal) return null\n    return (\n      <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50\">\n        <div className=\"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-md mx-4 shadow-2xl animate-in scale-in duration-200\">\n          <div className=\"px-6 py-5 border-b border-gray-200 dark:border-slate-700 flex items-center justify-between\">\n            <h3 className=\"text-xl font-bold text-[#171532] dark:text-white\">Deposit Amount</h3>\n            <div className=\"flex items-center gap-2 bg-[#f8f9fa] dark:bg-slate-700 px-3 py-1.5 rounded-lg border border-[#e8e8e8] dark:border-slate-600\">\n              <CalendarRange className=\"w-3.5 h-3.5 text-[#4a6670] dark:text-slate-400\" />\n              <select\n                value={selectedAcademicYear}\n                onChange={(e) => setSelectedAcademicYear(e.target.value)}\n                className=\"bg-transparent text-xs font-bold text-[#4a6670] dark:text-slate-200 focus:outline-none cursor-pointer\"\n              >\n                <option value=\"2023-24\">2023-24</option>\n                <option value=\"2024-25\">2024-25</option>\n                <option value=\"2025-26\">2025-26</option>\n                <option value=\"2026-27\">2026-27</option>\n                {academicYears.filter(y => ![\"2023-24\", \"2024-25\", \"2025-26\", \"2026-27\"].includes(y)).map(year => (\n                  <option key={year} value={year}>{year}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n          \n          <div className=\"px-6 py-6 space-y-4\">\n            <div className=\"flex items-center gap-3 bg-amber-50 dark:bg-slate-700 border border-amber-200 dark:border-amber-700 rounded-xl p-3\">\n              <input\n                type=\"checkbox\"\n                id=\"deposit-all\"\n                checked={depositAllStudents}\n                onChange={(e) => {\n                  setDepositAllStudents(e.target.checked)\n                  if (e.target.checked) setSelectedStudentIndex(null)\n                }}\n                className=\"w-4 h-4 rounded\"\n              />\n              <label htmlFor=\"deposit-all\" className=\"text-sm font-semibold text-[#171532] dark:text-white cursor-pointer\">\n                Deposit to All Students\n              </label>\n            </div>\n\n            {!depositAllStudents && (\n            <div>\n              <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-2\">Select Student</label>\n              <div className=\"relative\">\n                <button\n                  onClick={() => setShowDepositDropdown(!showDepositDropdown)}\n                  className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl text-[#171532] dark:text-white text-left flex items-center justify-between hover:border-[#4a6670] dark:hover:border-slate-500 transition-colors\"\n                >\n                  <span>{selectedStudentIndex !== null ? students[selectedStudentIndex]?.name : 'Choose a student...'}</span>\n                  <svg className={`w-5 h-5 transition-transform ${showDepositDropdown ? 'rotate-180' : ''}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 14l-7 7m0 0l-7-7m7 7V3\" />\n                  </svg>\n                </button>\n                \n                {showDepositDropdown && (\n                  <div className=\"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl shadow-lg z-10 max-h-64 overflow-y-auto\">\n                    {students.map((student, idx) => (\n                      <button\n                        key={idx}\n                        onClick={() => {\n                          setSelectedStudentIndex(idx)\n                          setShowDepositDropdown(false)\n                        }}\n                        className=\"w-full px-4 py-3 text-left hover:bg-[#f0f0f0] dark:hover:bg-slate-600 border-b border-gray-100 dark:border-slate-600 last:border-b-0 transition-colors text-[#171532] dark:text-white\"\n                      >\n                        <div className=\"font-medium\">{student.name}</div>\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n            )}\n\n            <div>\n              <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-2\">Amount (₹)</label>\n              <input\n                type=\"number\"\n                value={transactionAmount}\n                onChange={(e) => setTransactionAmount(e.target.value)}\n                placeholder=\"Enter amount\"\n                className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl focus:outline-none focus:border-[#4a6670] focus:ring-2 focus:ring-[#4a6670]/10 text-[#171532] dark:text-white placeholder:text-[#a0a0a0]\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-2\">Date</label>\n              <input\n                type=\"date\"\n                value={transactionDate}\n                onChange={(e) => setTransactionDate(e.target.value)}\n                className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl focus:outline-none focus:border-[#4a6670] focus:ring-2 focus:ring-[#4a6670]/10 text-[#171532] dark:text-white\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-2\">Reason (Optional)</label>\n              <input\n                type=\"text\"\n                value={transactionReason}\n                onChange={(e) => setTransactionReason(e.target.value)}\n                placeholder=\"e.g., Scholarship, Gift\"\n                className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl focus:outline-none focus:border-[#4a6670] focus:ring-2 focus:ring-[#4a6670]/10 text-[#171532] dark:text-white placeholder:text-[#a0a0a0]\"\n              />\n            </div>\n\n            <div className=\"flex gap-3 pt-4\">\n              <button\n                onClick={() => {\n                  setShowDepositModal(false)\n                  setTransactionAmount(\"\")\n                  setTransactionDate(new Date().toISOString().split('T')[0])\n                  setTransactionReason(\"\")\n                  setSelectedStudentIndex(null)\n                  setDepositAllStudents(false)\n                }}\n                className=\"flex-1 py-3 rounded-xl font-semibold text-[#171532] dark:text-white bg-[#f0f0f0] dark:bg-slate-700 hover:bg-[#e5e5e5] dark:hover:bg-slate-600 transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleDeposit}\n                className=\"flex-1 py-3 rounded-xl font-semibold text-white bg-[#10B981] hover:bg-[#0fa06f] transition-colors\"\n              >\n                Deposit\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const renderWithdrawModal = () => {\n    if (!showWithdrawModal) return null\n    return (\n      <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50\">\n        <div className=\"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-md mx-4 shadow-2xl animate-in scale-in duration-200\">\n          <div className=\"px-6 py-5 border-b border-gray-200 dark:border-slate-700 flex items-center justify-between\">\n            <h3 className=\"text-xl font-bold text-[#171532] dark:text-white\">Withdraw Amount</h3>\n            <div className=\"flex items-center gap-2 bg-[#f8f9fa] dark:bg-slate-700 px-3 py-1.5 rounded-lg border border-[#e8e8e8] dark:border-slate-600\">\n              <CalendarRange className=\"w-3.5 h-3.5 text-[#4a6670] dark:text-slate-400\" />\n              <select\n                value={selectedAcademicYear}\n                onChange={(e) => setSelectedAcademicYear(e.target.value)}\n                className=\"bg-transparent text-xs font-bold text-[#4a6670] dark:text-slate-200 focus:outline-none cursor-pointer\"\n              >\n                <option value=\"2023-24\">2023-24</option>\n                <option value=\"2024-25\">2024-25</option>\n                <option value=\"2025-26\">2025-26</option>\n                <option value=\"2026-27\">2026-27</option>\n                {academicYears.filter(y => ![\"2023-24\", \"2024-25\", \"2025-26\", \"2026-27\"].includes(y)).map(year => (\n                  <option key={year} value={year}>{year}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n          \n          <div className=\"px-6 py-6 space-y-4\">\n            <div className=\"flex items-center gap-3 bg-red-50 dark:bg-slate-700 border border-red-200 dark:border-red-700 rounded-xl p-3\">\n              <input\n                type=\"checkbox\"\n                id=\"withdraw-all\"\n                checked={withdrawAllStudents}\n                onChange={(e) => {\n                  setWithdrawAllStudents(e.target.checked)\n                  if (e.target.checked) setSelectedStudentIndex(null)\n                }}\n                className=\"w-4 h-4 rounded\"\n              />\n              <label htmlFor=\"withdraw-all\" className=\"text-sm font-semibold text-[#171532] dark:text-white cursor-pointer\">\n                Withdraw from All Students\n              </label>\n            </div>\n\n            {!withdrawAllStudents && (\n            <div>\n              <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-2\">Select Student</label>\n              <div className=\"relative\">\n                <button\n                  onClick={() => setShowWithdrawDropdown(!showWithdrawDropdown)}\n                  className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl text-[#171532] dark:text-white text-left flex items-center justify-between hover:border-[#4a6670] dark:hover:border-slate-500 transition-colors\"\n                >\n                  <span>{selectedStudentIndex !== null ? students[selectedStudentIndex]?.name : 'Choose a student...'}</span>\n                  <svg className={`w-5 h-5 transition-transform ${showWithdrawDropdown ? 'rotate-180' : ''}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 14l-7 7m0 0l-7-7m7 7V3\" />\n                  </svg>\n                </button>\n                \n                {showWithdrawDropdown && (\n                  <div className=\"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl shadow-lg z-10 max-h-64 overflow-y-auto\">\n                    {students.map((student, idx) => (\n                      <button\n                        key={idx}\n                        onClick={() => {\n                          setSelectedStudentIndex(idx)\n                          setShowWithdrawDropdown(false)\n                        }}\n                        className=\"w-full px-4 py-3 text-left hover:bg-[#f0f0f0] dark:hover:bg-slate-600 border-b border-gray-100 dark:border-slate-600 last:border-b-0 transition-colors text-[#171532] dark:text-white\"\n                      >\n                        <div className=\"font-medium\">{student.name}</div>\n                        <div className=\"text-xs text-[#747384] dark:text-gray-400\">Balance: ₹{student.balance.toFixed(2)}</div>\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n            )}\n\n            <div>\n              <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-2\">Amount (₹)</label>\n              <input\n                type=\"number\"\n                value={transactionAmount}\n                onChange={(e) => setTransactionAmount(e.target.value)}\n                placeholder=\"Enter amount\"\n                className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl focus:outline-none focus:border-[#4a6670] focus:ring-2 focus:ring-[#4a6670]/10 text-[#171532] dark:text-white placeholder:text-[#a0a0a0]\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-2\">Date</label>\n              <input\n                type=\"date\"\n                value={transactionDate}\n                onChange={(e) => setTransactionDate(e.target.value)}\n                className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl focus:outline-none focus:border-[#4a6670] focus:ring-2 focus:ring-[#4a6670]/10 text-[#171532] dark:text-white\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-[#171532] dark:text-white mb-2\">Reason (Optional)</label>\n              <input\n                type=\"text\"\n                value={transactionReason}\n                onChange={(e) => setTransactionReason(e.target.value)}\n                placeholder=\"e.g., School supplies, Emergency\"\n                className=\"w-full px-4 py-3 bg-[#f8f9fa] dark:bg-slate-700 border border-[#e8e8e8] dark:border-slate-600 rounded-xl focus:outline-none focus:border-[#4a6670] focus:ring-2 focus:ring-[#4a6670]/10 text-[#171532] dark:text-white placeholder:text-[#a0a0a0]\"\n              />\n            </div>\n\n            <div className=\"flex gap-3 pt-4\">\n              <button\n                onClick={() => {\n                  setShowWithdrawModal(false)\n                  setTransactionAmount(\"\")\n                  setTransactionDate(new Date().toISOString().split('T')[0])\n                  setTransactionReason(\"\")\n                  setSelectedStudentIndex(null)\n                  setWithdrawAllStudents(false)\n                }}\n                className=\"flex-1 py-3 rounded-xl font-semibold text-[#171532] dark:text-white bg-[#f0f0f0] dark:bg-slate-700 hover:bg-[#e5e5e5] dark:hover:bg-slate-600 transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleWithdraw}\n                className=\"flex-1 py-3 rounded-xl font-semibold text-white bg-[#EF4444] hover:bg-[#dc2626] transition-colors\"\n              >\n                Withdraw\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n\n  const renderMessageWithHighlight = (text: string) => {\n    const parts = text.split(/(\\*\\*[^*]+\\*\\*)/g)\n    return parts.map((part, idx) => {\n      if (part.startsWith('**') && part.endsWith('**')) {\n        return <strong key={idx} className=\"font-bold\">{part.slice(2, -2)}</strong>\n      }\n      return part\n    })\n  }\n\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (file) {\n      // Limit image size to 10MB\n      if (file.size > 10000000) {\n        alert(\"Image size must be less than 10MB\")\n        return\n      }\n      const reader = new FileReader()\n      reader.onloadend = () => {\n        const result = reader.result as string\n        // Compress if image is too large as base64 (over 5MB)\n        if (result.length > 5000000) {\n          const canvas = document.createElement('canvas')\n          const img = new Image()\n          img.onload = () => {\n            canvas.width = img.width * 0.8\n            canvas.height = img.height * 0.8\n            const ctx = canvas.getContext('2d')\n            if (ctx) {\n              ctx.drawImage(img, 0, 0, canvas.width, canvas.height)\n              setNewStudent({...newStudent, profileImage: canvas.toDataURL('image/jpeg', 0.8)})\n            }\n          }\n          img.src = result\n        } else {\n          setNewStudent({...newStudent, profileImage: result})\n        }\n      }\n      reader.readAsDataURL(file)\n    }\n  }\n\n  const handleEditAccount = (index: number) => {\n    const student = students[index]\n    setNewStudent({\n      name: student.name || '',\n      mobile: student.mobile || '',\n      email: student.email || '',\n      profileImage: student.profileImage || '',\n      academicYear: student.academicYear || '2024-25'\n    })\n    setEditingIndex(index)\n    setShowEditForm(true)\n  }\n\n  const handleUpdateAccount = async () => {\n    if (!newStudent.name) {\n      alert(\"Please fill in the full name\")\n      return\n    }\n\n    if (editingIndex !== null) {\n      const updatedStudents = [...students]\n      const originalStudent = updatedStudents[editingIndex]\n      \n      // Preserve all fields and update with new values\n      updatedStudents[editingIndex] = {\n        ...originalStudent,\n        name: newStudent.name,\n        email: newStudent.email || originalStudent.email,\n        mobile: newStudent.mobile || originalStudent.mobile,\n        profileImage: newStudent.profileImage || originalStudent.profileImage || ''\n      }\n      \n      setStudents(updatedStudents)\n      calculateTotals(updatedStudents)\n      \n      try {\n        // Update in database\n        const updateData = {\n          name: newStudent.name,\n          email: newStudent.email || originalStudent.email || '',\n          mobile: newStudent.mobile || originalStudent.mobile || '',\n          profileImage: newStudent.profileImage || originalStudent.profileImage || ''\n        }\n        \n        const res = await fetch(`/api/students/${originalStudent._id}`, {\n          method: 'PATCH',\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            ...newStudent,\n            academicYear: newStudent.academicYear || originalStudent.academicYear || '2024-25'\n          })\n        })\n        \n        if (!res.ok) {\n          const errorData = await res.json()\n          console.error('Update error:', errorData)\n          setNotification({ type: 'error', message: 'Failed to update account: ' + (errorData.error || 'Unknown error') })\n          setTimeout(() => setNotification(null), 3000)\n          return\n        }\n        \n        setNewStudent({ name: \"\", mobile: \"\", email: \"\", profileImage: \"\", academicYear: \"2024-25\" })\n        setEditingIndex(null)\n        setShowEditForm(false)\n        setNotification({ type: 'success', message: 'Account updated successfully!' })\n        setTimeout(() => setNotification(null), 3000)\n      } catch (error) {\n        console.error('Update error:', error)\n        setNotification({ type: 'error', message: 'Failed to update account' })\n        setTimeout(() => setNotification(null), 3000)\n      }\n    }\n  }\n\n  const handleDeleteAccount = (index: number) => {\n    setDeletingIndex(index)\n    setShowDeleteConfirm(true)\n  }\n\n  const confirmDeleteAccount = async () => {\n    if (deletingIndex !== null) {\n      try {\n        const deletedStudent = students[deletingIndex]\n        \n        // Delete from MongoDB if student has an ID\n        if (deletedStudent._id) {\n          const res = await fetch(`/api/students/${deletedStudent._id}`, {\n            method: 'DELETE'\n          })\n          if (!res.ok) {\n            throw new Error('Failed to delete from database')\n          }\n        }\n        \n        const updatedStudents = students.filter((_, i) => i !== deletingIndex)\n        setStudents(updatedStudents)\n        calculateTotals(updatedStudents)\n        \n        setShowDeleteConfirm(false)\n        setDeletingIndex(null)\n        setViewingIndex(null)\n        setNotification({ type: 'success', message: 'Account deleted successfully!' })\n        setTimeout(() => setNotification(null), 3000)\n      } catch (error) {\n        setNotification({ type: 'error', message: 'Failed to delete account' })\n        setTimeout(() => setNotification(null), 3000)\n      }\n    }\n  }\n\n  const cancelDeleteAccount = () => {\n    setShowDeleteConfirm(false)\n    setDeletingIndex(null)\n  }\n\n  const calculateTotals = (studentList: Student[]) => {\n    let balance = 0\n    let deposited = 0\n    let withdrawn = 0\n    \n    studentList.forEach((student) => {\n      // Calculate session-specific balance for each student\n      const sessionTransactions = student.transactions?.filter(t => selectedAcademicYear === 'all' || (t.academicYear || '2025-26') === selectedAcademicYear) || []\n      \n      let studentSessionBalance = 0\n      sessionTransactions.forEach((t) => {\n        if (t.type === 'deposit') {\n          deposited += t.amount || 0\n          studentSessionBalance += t.amount || 0\n        } else if (t.type === 'withdraw') {\n          withdrawn += t.amount || 0\n          studentSessionBalance -= t.amount || 0\n        }\n      })\n      balance += studentSessionBalance\n    })\n    \n    setTotalBalance(balance)\n    setTotalDeposited(deposited)\n    setTotalWithdrawn(withdrawn)\n  }\n\n  useEffect(() => {\n    // Verify admin session from MongoDB\n    const verifySession = async () => {\n      try {\n        const res = await fetch('/api/auth/verify')\n        if (!res.ok || (await res.json()).userType !== 'admin') {\n          router.push(\"/login\")\n          return\n        }\n        setIsAuthenticated(true)\n        setIsAuthLoading(false)\n      } catch (error) {\n        router.push(\"/login\")\n      }\n    }\n    \n    verifySession()\n    \n    // Fetch students from MongoDB API\n    const fetchStudents = async () => {\n      try {\n        const res = await fetch(`/api/students?academicYear=${selectedAcademicYear}`)\n        if (res.ok) {\n          const studentList = await res.json()\n          setStudents(studentList)\n          calculateTotals(studentList)\n        }\n      } catch (error) {\n        console.error('Failed to fetch students:', error)\n      }\n    }\n    \n    fetchStudents()\n    \n    // Fetch system status\n    const fetchSystemStatus = async () => {\n      try {\n        const res = await fetch('/api/system/status')\n        const data = await res.json()\n        setSystemStatus(data)\n      } catch (error) {\n        console.error('Failed to fetch system status:', error)\n      }\n    }\n    fetchSystemStatus()\n    const statusInterval = setInterval(fetchSystemStatus, 5000)\n    \n    // Refresh students list every 3 seconds to get updates (slower to prevent lag)\n    const studentRefreshInterval = setInterval(fetchStudents, 3000)\n    \n    const now = new Date()\n    const options: Intl.DateTimeFormatOptions = { day: 'numeric', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit', hour12: true }\n    setCurrentDate(now.toLocaleDateString('en-US', options))\n    \n    return () => {\n      clearInterval(statusInterval)\n      clearInterval(studentRefreshInterval)\n    }\n  }, [selectedAcademicYear])\n\n  // Use Pusher for real-time admin updates\n  usePusherAdminUpdates((data) => {\n    if (data.type === 'list-updated') {\n      setRealTimeStatus(true)\n      setTimeout(() => setRealTimeStatus(false), 2000)\n    }\n  })\n\n  const handleSearchOldStudent = async (codeValue?: string) => {\n    const codeToSearch = codeValue || oldStudentCode\n    if (!codeToSearch) return\n    setIsSearchingOldStudent(true)\n    try {\n      const res = await fetch(`/api/students/search?code=${codeToSearch}`)\n      if (res.ok) {\n        const student = await res.json()\n        setNewStudent({\n          ...newStudent,\n          name: student.name,\n          mobile: student.mobile || \"\",\n          email: student.email || \"\",\n          profileImage: student.profileImage || \"\",\n        })\n        toast.success(\"Student details loaded!\")\n      } else {\n        if (!codeValue) toast.error(\"Student not found\")\n      }\n    } catch (error) {\n      if (!codeValue) toast.error(\"Search failed\")\n    } finally {\n      setIsSearchingOldStudent(false)\n    }\n  }\n\n  const handleCreateAccount = async () => {\n    if (!newStudent.name) {\n      alert(\"Please fill in the full name\")\n      return\n    }\n\n    try {\n      const generatedCode = useOldCode && oldStudentCode ? oldStudentCode : `${newStudent.name\n        .split(' ')\n        .slice(0, 2)\n        .map((word: string) => word.charAt(0).toUpperCase())\n        .join('')}-${Math.floor(1000 + Math.random() * 8000)}`\n\n      const res = await fetch(\"/api/students\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          name: newStudent.name,\n          code: generatedCode,\n          profileImage: newStudent.profileImage,\n          academicYear: newStudent.academicYear,\n          balance: 0,\n          transactions: [],\n        }),\n      })\n\n      if (!res.ok) {\n        const error = await res.json()\n        throw new Error(error.error || \"Failed to create account\")\n      }\n\n      const createdStudent = await res.json()\n      setNewStudent({ name: \"\", mobile: \"\", email: \"\", profileImage: \"\", academicYear: \"2024-25\" })\n      setShowCreateForm(false)\n      setNotification({ type: 'success', message: `Account created! Code: ${generatedCode}` })\n      setTimeout(() => setNotification(null), 5000)\n      \n      // Refresh students list\n      try {\n        const studentsRes = await fetch(`/api/students?academicYear=${selectedAcademicYear}`)\n        if (studentsRes.ok) {\n          const updatedList = await studentsRes.json()\n          setStudents(updatedList)\n          calculateTotals(updatedList)\n        }\n      } catch (err) {\n        console.error('Failed to refresh students list:', err)\n      }\n    } catch (error) {\n      setNotification({ type: 'error', message: `Failed to create account: ${error instanceof Error ? error.message : 'Unknown error'}` })\n      setTimeout(() => setNotification(null), 3000)\n    }\n  }\n\n  const renderDeleteConfirmModal = () => {\n    if (!showDeleteConfirm || deletingIndex === null) return null\n    const studentName = students[deletingIndex]?.name\n    return (\n      <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[100]\">\n        <div className=\"bg-white rounded-2xl w-full max-w-sm mx-4 shadow-2xl animate-in scale-in duration-200\">\n          <div className=\"px-6 py-6 space-y-4\">\n            <div className=\"flex items-center justify-center w-12 h-12 rounded-full bg-red-100 mx-auto\">\n              <Trash2 className=\"w-6 h-6 text-red-600\" />\n            </div>\n            \n            <div className=\"text-center\">\n              <h3 className=\"text-xl font-bold text-[#171532] mb-2\">Delete Account</h3>\n              <p className=\"text-sm text-[#747384]\">\n                Are you sure you want to delete <span className=\"font-semibold text-[#171532]\">{studentName}</span>? This action cannot be undone.\n              </p>\n            </div>\n\n            <div className=\"flex gap-3 pt-4\">\n              <button\n                onClick={cancelDeleteAccount}\n                className=\"flex-1 py-3 rounded-xl font-semibold text-[#171532] bg-[#f0f0f0] hover:bg-[#e5e5e5] transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={confirmDeleteAccount}\n                className=\"flex-1 py-3 rounded-xl font-semibold text-white bg-red-600 hover:bg-red-700 transition-colors\"\n              >\n                Delete\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (!isAuthenticated || isAuthLoading) {\n    return null\n  }\n\n  const handleAddAcademicYear = () => {\n    if (!newYearInput || !/^\\d{4}-\\d{2}$/.test(newYearInput)) {\n      toast.error(\"Invalid format. Use YYYY-YY (e.g., 2026-27)\")\n      return\n    }\n    if (academicYears.includes(newYearInput)) {\n      toast.error(\"Year already exists\")\n      return\n    }\n    setAcademicYears(prev => [...prev, newYearInput].sort())\n    setNewYearYearInput(\"\")\n    setShowAddYearForm(false)\n    toast.success(`Academic year ${newYearInput} added!`)\n  }\n\n  const renderYearTab = () => (\n    <>\n      <div className=\"flex items-center gap-3 mb-6\">\n        <button onClick={() => setActiveTab(\"home\")} className=\"p-2 hover:bg-[#f0f0f0] rounded-lg transition-colors\">\n          <ChevronLeft className=\"w-6 h-6 text-[#4a6670]\" />\n        </button>\n        <h2 className=\"text-lg font-bold text-[#171532]\">Academic Year</h2>\n      </div>\n      \n      <div className=\"bg-white rounded-2xl p-6 shadow-lg border border-[#e5e7eb] space-y-6\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <label className=\"block text-sm font-bold text-[#171532]\">Select Active Academic Year</label>\n          <button \n            onClick={() => setShowAddYearForm(true)}\n            className=\"flex items-center gap-1.5 bg-[#4a6670] text-white px-3 py-1.5 rounded-lg text-xs font-bold hover:bg-[#3d565e] transition-all\"\n          >\n            <Plus className=\"w-3.5 h-3.5\" />\n            Add New\n          </button>\n        </div>\n\n        {showAddYearForm && (\n          <div className=\"bg-[#f8f9fa] border-2 border-dashed border-[#e8e8e8] rounded-xl p-4 space-y-3 animate-in fade-in zoom-in duration-200\">\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-xs font-bold text-[#4a6670]\">New Academic Session</span>\n            <button onClick={() => setShowAddYearForm(false)} className=\"text-[#747384] hover:text-red-500\">\n              <X className=\"w-4 h-4\" />\n            </button>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <input\n              type=\"text\"\n              value={newYearInput}\n              onChange={(e) => setNewYearYearInput(e.target.value)}\n              placeholder=\"e.g., 2026-27\"\n              className=\"flex-1 px-3 py-2 bg-white border border-[#e8e8e8] rounded-lg text-sm focus:outline-none focus:border-[#4a6670]\"\n            />\n            <button\n              onClick={handleAddAcademicYear}\n              className=\"h-[38px] bg-[#10B981] text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-[#0fa06f] whitespace-nowrap\"\n            >\n              Save\n            </button>\n          </div>\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-1 gap-3\">\n          {academicYears.map((year) => (\n            <button\n              key={year}\n              onClick={() => {\n                setSelectedAcademicYear(year)\n                setActiveTab(\"home\")\n                toast.success(`Active year set to ${year}`)\n              }}\n              className={`w-full p-4 rounded-xl text-left font-bold transition-all border-2 ${\n                selectedAcademicYear === year\n                  ? \"bg-[#4a6670] border-[#4a6670] text-white shadow-md scale-[1.02]\"\n                  : \"bg-[#f8f9fa] border-[#e8e8e8] text-[#171532] hover:border-[#4a6670]/30\"\n              }`}\n            >\n              <div className=\"flex items-center justify-between\">\n                <span>{year} Academic Session</span>\n                {selectedAcademicYear === year && <div className=\"w-2 h-2 bg-yellow-400 rounded-full animate-pulse\"></div>}\n              </div>\n            </button>\n          ))}\n        </div>\n        \n        <div className=\"bg-amber-50 border border-amber-100 rounded-xl p-4\">\n          <p className=\"text-xs text-amber-800 font-medium leading-relaxed\">\n            Note: Changing the academic year will filter all student accounts, transactions, and reports to show data only for the selected session.\n          </p>\n        </div>\n      </div>\n    </>\n  )\n\n  const handleBulkDelete = async (type: 'students' | 'transactions') => {\n    const confirmMsg = type === 'students' \n      ? \"Are you sure you want to delete ALL students? This cannot be undone.\"\n      : \"Are you sure you want to delete ALL transactions? Balances will be reset to 0.\";\n    \n    if (!window.confirm(confirmMsg)) return;\n\n    try {\n      const res = await fetch('/api/admin/bulk-delete', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ type })\n      });\n\n      if (res.ok) {\n        toast.success(`All ${type} deleted successfully`);\n        window.location.reload(); // Refresh data\n      } else {\n        throw new Error(\"Deletion failed\");\n      }\n    } catch (error) {\n      toast.error(\"Failed to perform bulk deletion\");\n    }\n  };\n\n  const renderHomeTab = () => (\n    <>\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-[#4a6670] to-[#3d565e] flex items-center justify-center text-white font-bold text-lg\">\n            A\n          </div>\n          <div>\n            <h1 className=\"text-xl font-bold text-[#171532]\">Morning, Admin!</h1>\n            <p className=\"text-xs text-[#747384]\">{currentDate}</p>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <button className=\"w-10 h-10 bg-[#f0f0f0] rounded-lg flex items-center justify-center\">\n            <Bell className=\"w-5 h-5 text-[#4a6670]\" />\n          </button>\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-2xl p-5 mb-6 shadow-lg\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center\">\n            <Wallet className=\"w-6 h-6 text-white\" />\n          </div>\n          <div className=\"flex-1 flex flex-col\">\n            <div className=\"flex items-center gap-2\">\n              <p className=\"text-white/70 text-sm\">Total Balance</p>\n              <select\n                value={selectedAcademicYear}\n                onChange={(e) => {\n                  setSelectedAcademicYear(e.target.value)\n                  toast.success(`Active year set to ${e.target.value}`)\n                }}\n                className=\"bg-white/10 hover:bg-white/20 border-none text-white text-xs font-bold py-1 px-2 rounded-lg focus:ring-0 cursor-pointer transition-colors\"\n              >\n                {academicYears.map(year => (\n                  <option key={year} value={year} className=\"bg-[#3d565e] text-white\">\n                    {year}\n                  </option>\n                ))}\n              </select>\n            </div>\n            <p className=\"text-2xl font-bold text-white\">₹{totalBalance.toFixed(2)}</p>\n          </div>\n        </div>\n        \n        <div className=\"grid grid-cols-2 gap-3\">\n          <div className=\"bg-white/10 rounded-xl p-3\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <div className=\"w-8 h-8 bg-[#10B981]/20 rounded-lg flex items-center justify-center\">\n                <ArrowDownRight className=\"w-4 h-4 text-[#10B981]\" />\n              </div>\n              <p className=\"text-white/70 text-xs\">Deposited</p>\n            </div>\n            <p className=\"text-lg font-bold text-white\">₹{totalDeposited.toFixed(2)}</p>\n          </div>\n          \n          <div className=\"bg-white/10 rounded-xl p-3\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <div className=\"w-8 h-8 bg-[#EF4444]/20 rounded-lg flex items-center justify-center\">\n                <ArrowUpRight className=\"w-4 h-4 text-[#EF4444]\" />\n              </div>\n              <p className=\"text-white/70 text-xs\">Withdrawn</p>\n            </div>\n            <p className=\"text-lg font-bold text-white\">₹{totalWithdrawn.toFixed(2)}</p>\n          </div>\n        </div>\n      </div>\n\n      <h2 className=\"text-lg font-bold text-[#171532] mb-4\">Options</h2>\n      <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6\">\n        <button \n          onClick={() => setShowDepositModal(true)}\n          className=\"bg-white border border-[#e5e7eb] rounded-2xl p-6 flex flex-col items-center gap-3 hover:bg-[#f8f9fa] transition-all shadow-sm\">\n          <div className=\"w-12 h-12 bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-xl flex items-center justify-center\">\n            <ArrowDownRight className=\"w-6 h-6 text-white\" />\n          </div>\n          <span className=\"text-sm font-bold text-[#171532]\">Deposit</span>\n        </button>\n        <button \n          onClick={() => setShowWithdrawModal(true)}\n          className=\"bg-white border border-[#e5e7eb] rounded-2xl p-6 flex flex-col items-center gap-3 hover:bg-[#f8f9fa] transition-all shadow-sm\">\n          <div className=\"w-12 h-12 bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-xl flex items-center justify-center\">\n            <ArrowUpRight className=\"w-6 h-6 text-white\" />\n          </div>\n          <span className=\"text-sm font-bold text-[#171532]\">Withdraw</span>\n        </button>\n        <button \n          onClick={() => router.push(\"/admin/qr-download\")}\n          className=\"bg-white border border-[#e5e7eb] rounded-2xl p-6 flex flex-col items-center gap-3 hover:bg-[#f8f9fa] transition-all shadow-sm\">\n          <div className=\"w-12 h-12 bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-xl flex items-center justify-center\">\n            <QrCode className=\"w-6 h-6 text-white\" />\n          </div>\n          <span className=\"text-sm font-bold text-[#171532]\">QR Code</span>\n        </button>\n\n        <button \n          onClick={() => setActiveTab(\"calendar\")}\n          className=\"bg-white border border-[#e5e7eb] rounded-2xl p-6 flex flex-col items-center gap-3 hover:bg-[#f8f9fa] transition-all shadow-sm\">\n          <div className=\"w-12 h-12 bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-xl flex items-center justify-center\">\n            <Calendar className=\"w-6 h-6 text-white\" />\n          </div>\n          <span className=\"text-sm font-bold text-[#171532]\">Calendar</span>\n        </button>\n        <button \n          onClick={() => setActiveTab(\"status\")}\n          className=\"bg-white border border-[#e5e7eb] rounded-2xl p-6 flex flex-col items-center gap-3 hover:bg-[#f8f9fa] transition-all shadow-sm\">\n          <div className=\"w-12 h-12 bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-xl flex items-center justify-center\">\n            <AlertCircle className=\"w-6 h-6 text-white\" />\n          </div>\n          <span className=\"text-sm font-bold text-[#171532]\">Status</span>\n        </button>\n        <button \n          onClick={() => window.location.href = '/admin/reports'}\n          className=\"bg-white border border-[#e5e7eb] rounded-2xl p-6 flex flex-col items-center gap-3 hover:bg-[#f8f9fa] transition-all shadow-sm\">\n          <div className=\"w-12 h-12 bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-xl flex items-center justify-center\">\n            <BarChart3 className=\"w-6 h-6 text-white\" />\n          </div>\n          <span className=\"text-sm font-bold text-[#171532]\">Reports</span>\n        </button>\n        <button \n          onClick={() => setActiveTab(\"ai\")}\n          className=\"bg-white border border-[#e5e7eb] rounded-2xl p-6 flex flex-col items-center gap-3 hover:bg-[#f8f9fa] transition-all shadow-sm\">\n          <div className=\"w-12 h-12 bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-xl flex items-center justify-center transition-colors\">\n            <Sparkles className=\"w-6 h-6 text-white\" />\n          </div>\n          <span className=\"text-sm font-bold text-[#171532]\">AI</span>\n        </button>\n\n        <button \n          onClick={() => setActiveTab(\"year\")}\n          className=\"bg-white border border-[#e5e7eb] rounded-2xl p-6 flex flex-col items-center gap-3 hover:bg-[#f8f9fa] transition-all shadow-sm\">\n          <div className=\"w-12 h-12 bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-xl flex items-center justify-center transition-colors\">\n            <CalendarRange className=\"w-6 h-6 text-white\" />\n          </div>\n          <span className=\"text-sm font-bold text-[#171532]\">Session</span>\n        </button>\n\n        <button \n          onClick={() => router.push(\"/admin/bulk-edit\")}\n          className=\"bg-white border border-[#e5e7eb] rounded-2xl p-6 flex flex-col items-center gap-3 hover:bg-[#f8f9fa] transition-all shadow-sm\">\n          <div className=\"w-12 h-12 bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-xl flex items-center justify-center\">\n            <Edit className=\"w-6 h-6 text-white\" />\n          </div>\n          <span className=\"text-sm font-bold text-[#171532]\">Edit</span>\n        </button>\n      </div>\n    </>\n  )\n\n  const renderLeaderboardTab = () => {\n    const sortedStudents = [...students].sort((a, b) => (b.balance || 0) - (a.balance || 0))\n    const getMedalIcon = (index: number) => {\n      if (index === 0) return '🥇'\n      if (index === 1) return '🥈'\n      if (index === 2) return '🥉'\n      return null\n    }\n    \n    return (\n      <>\n        <div className=\"flex items-center gap-3 mb-6 bg-gradient-to-r from-[#4a6670] to-[#3d565e] text-white rounded-2xl p-4 border-2 border-[#5a7680]/50 shadow-md\">\n          <button onClick={() => setActiveTab(\"home\")} className=\"p-2 hover:bg-white/20 rounded-lg transition-colors\">\n            <ChevronLeft className=\"w-6 h-6 text-white\" />\n          </button>\n          <h2 className=\"text-lg font-bold text-white flex items-center gap-2\">\n            <Trophy className=\"w-5 h-5 text-yellow-400\" />\n            Top Richest Students\n          </h2>\n        </div>\n\n        {sortedStudents.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <Trophy className=\"w-16 h-16 mx-auto mb-4 text-[#e5e7eb]\" />\n            <p className=\"text-[#747384]\">No students yet</p>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {sortedStudents.map((student, index) => {\n              const medal = getMedalIcon(index)\n              const isTop3 = index < 3\n              return (\n                <div \n                  key={index} \n                  className={`p-4 rounded-2xl flex items-center gap-3 border-2 shadow-sm transition-all ${\n                    index === 0 ? 'bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-300' :\n                    index === 1 ? 'bg-gradient-to-r from-gray-50 to-gray-100 border-gray-300' :\n                    index === 2 ? 'bg-gradient-to-r from-orange-50 to-orange-100 border-orange-300' :\n                    'bg-white border-[#e5e7eb]'\n                  }`}\n                >\n                  {isTop3 ? (\n                    <div className=\"text-2xl flex-shrink-0\">{medal}</div>\n                  ) : (\n                    <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-[#4a6670] to-[#3d565e] flex items-center justify-center text-white font-bold text-sm flex-shrink-0\">\n                      {index + 1}\n                    </div>\n                  )}\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"font-bold text-[#171532] truncate\">{student.name}</p>\n                    <p className=\"text-xs text-[#747384] truncate\">@{student.username || 'no_username'}</p>\n                  </div>\n                  <div className=\"text-right flex-shrink-0\">\n                    <p className={`font-bold ${\n                      index === 0 ? 'text-yellow-600 text-lg' :\n                      index === 1 ? 'text-gray-600 text-lg' :\n                      index === 2 ? 'text-orange-600 text-lg' :\n                      'text-[#10B981] text-base'\n                    }`}>\n                      ₹{(student.balance || 0).toFixed(2)}\n                    </p>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        )}\n      </>\n    )\n  }\n\n  const renderAccountDetailView = () => {\n    if (viewingIndex === null || !students[viewingIndex]) {\n      setViewingIndex(null)\n      return null\n    }\n    const student = students[viewingIndex]\n    return (\n      <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-end sm:items-center justify-center z-50\">\n        <div className=\"bg-white rounded-t-3xl sm:rounded-2xl w-full sm:max-w-md max-h-[85vh] overflow-y-auto shadow-2xl animate-in slide-in-from-bottom duration-300\">\n          <div className=\"sticky top-0 bg-white flex items-center justify-between px-6 py-5 border-b border-[#f0f0f0]\">\n            <h3 className=\"text-xl font-bold text-[#171532]\">Account Details</h3>\n            <button onClick={() => setViewingIndex(null)} className=\"w-8 h-8 flex items-center justify-center rounded-full bg-[#f5f5f5] text-[#747384] hover:bg-[#e5e5e5] transition-colors\">\n              <X className=\"w-4 h-4\" />\n            </button>\n          </div>\n          \n          <div className=\"px-6 py-6 space-y-5\">\n            <div className=\"flex justify-center pb-4\">\n              {student?.profileImage ? (\n                <img src={student.profileImage} alt={student?.name || 'Student'} className=\"w-24 h-24 rounded-full object-cover shadow-lg\" />\n              ) : (\n                <div className={`w-24 h-24 rounded-full ${avatarColors[viewingIndex % avatarColors.length]} flex items-center justify-center text-3xl font-bold text-[#4a6670]`}>\n                  {student?.name?.charAt(0) || 'S'}\n                </div>\n              )}\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-xs font-semibold text-[#747384] mb-1\">Full Name</label>\n                <p className=\"text-lg font-semibold text-[#171532]\">{student?.name || 'N/A'}</p>\n              </div>\n\n              <div>\n                <label className=\"block text-xs font-semibold text-[#747384] mb-1\">Code</label>\n                <p className=\"text-lg font-semibold text-[#171532]\">{student?.code || 'N/A'}</p>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-xs font-semibold text-[#747384] mb-1\">Balance</label>\n                  <p className=\"text-lg font-bold text-[#10B981]\">₹{(student?.balance || 0).toFixed(2)}</p>\n                </div>\n                <div>\n                  <label className=\"block text-xs font-semibold text-[#747384] mb-1\">Transactions</label>\n                  <p className=\"text-lg font-semibold text-[#171532]\">{student?.transactions?.length || 0}</p>\n                </div>\n              </div>\n\n              <div className=\"pt-4 border-t border-[#f0f0f0]\">\n                <h4 className=\"text-sm font-bold text-[#171532] mb-3\">Transaction History</h4>\n                <div className=\"space-y-2 max-h-64 overflow-y-auto pr-2\">\n                  {student.transactions && student.transactions.length > 0 ? (\n                    [...student.transactions].reverse().map((tx, idx) => (\n                      <div key={idx} className=\"flex items-center justify-between p-3 bg-[#f8f9fa] rounded-xl group border border-transparent hover:border-[#e5e7eb] transition-all\">\n                        <div className=\"min-w-0 flex-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className={`w-2 h-2 rounded-full ${tx.type === 'deposit' ? 'bg-green-500' : 'bg-red-500'}`}></span>\n                            <p className=\"text-sm font-bold text-[#171532]\">\n                              {tx.type === 'deposit' ? '+' : '-'}₹{tx.amount.toFixed(2)}\n                            </p>\n                            <span className=\"text-[10px] bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded-md font-medium\">\n                              {tx.academicYear || '2024-25'}\n                            </span>\n                          </div>\n                          <p className=\"text-[10px] text-[#747384] truncate\">\n                            {tx.date} {tx.reason ? `• ${tx.reason}` : ''}\n                          </p>\n                        </div>\n                        <button\n                          onClick={() => {\n                            const actualIdx = student.transactions.length - 1 - idx;\n                            setEditingTransaction({ studentIndex: viewingIndex, transactionIndex: actualIdx });\n                            setEditTxAmount(tx.amount.toString());\n                            setEditTxDate(new Date(tx.date || Date.now()).toISOString().split('T')[0]);\n                            setEditTxReason(tx.reason || \"\");\n                          }}\n                          className=\"p-2 hover:bg-blue-50 text-blue-600 rounded-lg opacity-0 group-hover:opacity-100 transition-all\"\n                          title=\"Edit Transaction\"\n                        >\n                          <Edit className=\"w-3.5 h-3.5\" />\n                        </button>\n                      </div>\n                    ))\n                  ) : (\n                    <p className=\"text-center py-4 text-[#747384] text-xs\">No transactions yet</p>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"flex gap-3 pt-6 border-t border-[#e5e7eb]\">\n                <button\n                  onClick={() => {\n                    setViewingIndex(null)\n                    handleEditAccount(viewingIndex)\n                  }}\n                  className=\"flex-1 flex items-center justify-center gap-2 bg-blue-100 text-blue-600 py-3 rounded-xl font-semibold hover:bg-blue-200 transition-colors\"\n                >\n                  <Edit className=\"w-4 h-4\" />\n                  Edit Account\n                </button>\n                <button\n                  onClick={() => {\n                    setViewingIndex(null)\n                    handleDeleteAccount(viewingIndex)\n                  }}\n                  className=\"flex-1 flex items-center justify-center gap-2 bg-red-100 text-red-600 py-3 rounded-xl font-semibold hover:bg-red-200 transition-colors\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                  Delete\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const renderEditTransactionModal = () => {\n    if (!editingTransaction) return null;\n    const student = students[editingTransaction.studentIndex];\n    const tx = student.transactions[editingTransaction.transactionIndex];\n\n  const handleUpdateTransaction = async () => {\n    try {\n      const amount = parseFloat(editTxAmount);\n      if (isNaN(amount) || amount <= 0) {\n        setNotification({ type: 'error', message: 'Please enter a valid amount' });\n        setTimeout(() => setNotification(null), 3000);\n        return;\n      }\n\n      const updatedStudents = [...students];\n      const targetStudent = updatedStudents[editingTransaction.studentIndex];\n      const targetTx = targetStudent.transactions[editingTransaction.transactionIndex];\n\n      // Update transaction\n      targetTx.amount = amount;\n      targetTx.date = new Date(editTxDate || Date.now()).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n      targetTx.reason = editTxReason || undefined;\n      targetTx.academicYear = selectedAcademicYear; // Add this line to update year during edit\n\n      // Recalculate balance and re-sort transactions\n      let newBalance = 0;\n      targetStudent.transactions.forEach(t => {\n        if (t.type === 'deposit') newBalance += t.amount;\n        else newBalance -= t.amount;\n      });\n      \n      // Update in database\n      const res = await fetch(`/api/students/${targetStudent._id}`, {\n        method: 'PATCH',\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ...targetStudent,\n          balance: newBalance,\n          transactions: targetStudent.transactions\n        })\n      });\n\n      if (!res.ok) throw new Error('Failed to update');\n\n      setStudents(updatedStudents);\n      calculateTotals(updatedStudents);\n      setEditingTransaction(null);\n      setNotification({ type: 'success', message: 'Transaction updated successfully' });\n      setTimeout(() => setNotification(null), 3000);\n\n      // Broadcast update\n      fetch('/api/pusher/broadcast', {\n        method: 'POST',\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          type: 'balance-update',\n          studentId: targetStudent._id,\n          update: { balance: targetStudent.balance }\n        })\n      }).catch(console.error);\n\n    } catch (err) {\n      setNotification({ type: 'error', message: 'Failed to update transaction' });\n      setTimeout(() => setNotification(null), 3000);\n    }\n  };\n\n    return (\n      <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[60]\">\n        <div className=\"bg-white rounded-2xl w-full max-w-sm mx-4 shadow-2xl p-6 space-y-4 animate-in scale-in duration-200\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-lg font-bold text-[#171532]\">Edit Transaction</h3>\n            <button onClick={() => setEditingTransaction(null)} className=\"p-2 hover:bg-[#f0f0f0] rounded-full\">\n              <X className=\"w-4 h-4\" />\n            </button>\n          </div>\n\n          <div className=\"space-y-3\">\n            <div>\n              <label className=\"block text-xs font-semibold text-[#747384] mb-1\">Type</label>\n              <div className={`text-sm font-bold ${tx.type === 'deposit' ? 'text-green-600' : 'text-red-600'} capitalize`}>\n                {tx.type}\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-semibold text-[#747384] mb-1\">Amount (₹)</label>\n              <input\n                type=\"number\"\n                value={editTxAmount}\n                onChange={(e) => setEditTxAmount(e.target.value)}\n                className=\"w-full px-4 py-2 bg-[#f8f9fa] border border-[#e8e8e8] rounded-xl focus:outline-none focus:border-[#4a6670]\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-semibold text-[#747384] mb-1\">Date</label>\n              <input\n                type=\"date\"\n                value={editTxDate}\n                onChange={(e) => setEditTxDate(e.target.value)}\n                className=\"w-full px-4 py-2 bg-[#f8f9fa] border border-[#e8e8e8] rounded-xl focus:outline-none focus:border-[#4a6670]\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-semibold text-[#747384] mb-1\">Reason</label>\n              <input\n                type=\"text\"\n                value={editTxReason}\n                onChange={(e) => setEditTxReason(e.target.value)}\n                className=\"w-full px-4 py-2 bg-[#f8f9fa] border border-[#e8e8e8] rounded-xl focus:outline-none focus:border-[#4a6670]\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-semibold text-[#747384] mb-1\">Academic Year</label>\n              <select\n                value={selectedAcademicYear}\n                onChange={(e) => setSelectedAcademicYear(e.target.value)}\n                className=\"w-full px-4 py-2 bg-[#f8f9fa] border border-[#e8e8e8] rounded-xl focus:outline-none focus:border-[#4a6670]\"\n              >\n                <option value=\"2023-24\">2023-24</option>\n                <option value=\"2024-25\">2024-25</option>\n                <option value=\"2025-26\">2025-26</option>\n                <option value=\"2026-27\">2026-27</option>\n                {academicYears.filter(y => ![\"2023-24\", \"2024-25\", \"2025-26\", \"2026-27\"].includes(y)).map(year => (\n                  <option key={year} value={year}>{year}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          <div className=\"flex gap-2 pt-2\">\n            <button\n              onClick={() => setEditingTransaction(null)}\n              className=\"flex-1 py-2.5 bg-gray-100 text-gray-700 rounded-xl font-bold text-sm\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleUpdateTransaction}\n              className=\"flex-1 py-2.5 bg-[#4a6670] text-white rounded-xl font-bold text-sm\"\n            >\n              Save Changes\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const renderAITab = () => {\n    const topStudent = students.length > 0 ? [...students].sort((a, b) => (b.balance || 0) - (a.balance || 0))[0] : null\n    \n    const handleSendMessage = async (message?: string) => {\n      const msg = message || aiInput\n      if (!msg.trim()) return\n      setAiInput(\"\")\n      setAiMessages(prev => [...prev, { role: \"user\", text: msg }])\n      setAiLoading(true)\n      \n      // Prepare student context for AI\n      const studentContext = students.map((s, i) => \n        `${i + 1}. ${s.name} (${s.email}): Balance ₹${s.balance.toFixed(2)}, Transactions: ${s.transactions.length}`\n      ).join(\"; \")\n      \n      let prompt = msg\n      if (msg.includes(\"Live Scoreboard\")) {\n        prompt = `Show me the live scoreboard with top 3 students: ${[...students].sort((a, b) => (b.balance || 0) - (a.balance || 0)).slice(0, 3).map((s, i) => `${i + 1}. ${s.name}: ₹${s.balance.toFixed(2)}`).join(\", \")}`\n      } else if (msg.includes(\"Sponsor Request\")) {\n        prompt = `Generate a professional sponsorship request email for JDSA Students Bank. Include that we have ${students.length} active students with total balance of ₹${totalBalance.toFixed(2)}.`\n      } else if (msg.includes(\"Total amount of all accounts\")) {\n        prompt = `The total amount of all accounts combined is ₹${totalBalance.toFixed(2)}. This includes ${students.length} active student accounts with various balances.`\n      } else if (msg.includes(\"Top rich person\")) {\n        const topRich = [...students].sort((a, b) => (b.balance || 0) - (a.balance || 0))[0]\n        prompt = `The richest person is ${topRich?.name || 'N/A'} who is leading in our bank rankings.`\n      }\n      \n      try {\n        const response = await fetch(\"/api/gemini\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ \n            message: prompt,\n            studentContext: studentContext,\n            adminName: adminName\n          })\n        })\n        const data = await response.json()\n        setAiMessages(prev => [...prev, { role: \"assistant\", text: data.response || \"No response\" }])\n      } catch (error) {\n        setAiMessages(prev => [...prev, { role: \"assistant\", text: \"Error: Failed to get response\" }])\n      }\n      setAiLoading(false)\n    }\n    \n    return (\n      <div className=\"flex flex-col h-full pb-20\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between gap-3 pb-4 bg-gradient-to-r from-[#4a6670] to-[#3d565e] text-white rounded-2xl p-4 mb-4 border-2 border-[#5a7680]/50 shadow-md\">\n          <div className=\"flex items-center gap-3\">\n            <button onClick={() => setActiveTab(\"home\")} className=\"p-2 hover:bg-white/20 rounded-lg transition-colors flex-shrink-0\">\n              <ChevronLeft className=\"w-5 h-5 text-white\" />\n            </button>\n            <div>\n              <h1 className=\"text-2xl font-bold text-white\">Hi there, <span className=\"text-yellow-400\">{adminName.split(' ')[0]}</span></h1>\n              <p className=\"text-xs text-white/70\">What can I help with?</p>\n            </div>\n          </div>\n          {aiMessages.length > 0 && (\n            <button onClick={() => setAiMessages([])} className=\"p-2 hover:bg-white/20 rounded-lg transition-colors flex-shrink-0\" title=\"Clear conversation\">\n              <X className=\"w-5 h-5 text-white\" />\n            </button>\n          )}\n        </div>\n        \n        {/* Main Content */}\n        <div className=\"flex-1 overflow-y-auto py-4\">\n          <p className=\"text-sm text-[#747384] mb-4\">Start a conversation or pick a topic.</p>\n          \n          {aiMessages.length === 0 ? (\n            <div className=\"space-y-3\">\n              <button \n                onClick={() => handleSendMessage(\"Total amount of all accounts\")}\n                className=\"w-full bg-white border-2 border-[#e5e7eb] rounded-xl p-3 text-left hover:border-purple-300 hover:shadow-md hover:bg-[#f8f9fa] transition-all active:scale-95\"\n              >\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"font-semibold text-[#171532] text-sm\">💰 Total Amount</h3>\n                    <p className=\"text-xs text-[#747384] mt-0.5\">All accounts combined</p>\n                  </div>\n                  <Wallet className=\"w-4 h-4 text-purple-400 flex-shrink-0 mt-0.5\" />\n                </div>\n              </button>\n              \n              <button \n                onClick={() => handleSendMessage(\"Top rich person\")}\n                className=\"w-full bg-white border-2 border-[#e5e7eb] rounded-xl p-3 text-left hover:border-purple-300 hover:shadow-md hover:bg-[#f8f9fa] transition-all active:scale-95\"\n              >\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"font-semibold text-[#171532] text-sm\">👑 Top Rich Person</h3>\n                    <p className=\"text-xs text-[#747384] mt-0.5\">Who is the richest?</p>\n                  </div>\n                  <Star className=\"w-4 h-4 text-purple-400 flex-shrink-0 mt-0.5\" />\n                </div>\n              </button>\n            </div>\n          ) : (\n            <div className=\"space-y-3 pb-4\">\n              {aiMessages.map((msg, idx) => (\n                <div key={idx} className={`flex ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"} gap-2`}>\n                  {msg.role === \"assistant\" && (\n                    <div className=\"w-7 h-7 rounded-full bg-amber-100 flex items-center justify-center flex-shrink-0 mt-1\">\n                      <Sparkles className=\"w-4 h-4 text-amber-700\" />\n                    </div>\n                  )}\n                  <div className={`max-w-xs px-4 py-3 rounded-2xl text-sm break-words ${msg.role === \"user\" ? \"bg-amber-700 text-white rounded-br-3xl\" : \"bg-white text-[#171532] border border-gray-200 rounded-bl-3xl shadow-sm\"}`}>\n                    {msg.role === \"assistant\" ? renderMessageWithHighlight(msg.text) : msg.text}\n                  </div>\n                </div>\n              ))}\n              {aiLoading && (\n                <div className=\"flex justify-start gap-2 items-center pt-2\">\n                  <div className=\"w-7 h-7 rounded-full bg-amber-100 flex items-center justify-center flex-shrink-0\">\n                    <Sparkles className=\"w-4 h-4 text-amber-700\" />\n                  </div>\n                  <div className=\"bg-white border border-gray-200 px-4 py-3 rounded-2xl rounded-bl-3xl flex items-center gap-2 shadow-sm\">\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{animationDelay: '0.1s'}}></div>\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{animationDelay: '0.2s'}}></div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Input Section - Fixed at bottom */}\n        <div className=\"fixed bottom-28 left-4 right-4 bg-white border-2 border-[#e5e7eb] rounded-xl p-3 space-y-2\">\n          <p className=\"text-xs font-bold text-[#4a6670]\">✨ ASK JDSA AI</p>\n          <div className=\"flex items-center gap-2\">\n            <input\n              type=\"text\"\n              value={aiInput}\n              onChange={(e) => setAiInput(e.target.value)}\n              onKeyPress={(e) => e.key === \"Enter\" && handleSendMessage()}\n              placeholder=\"Type your question...\"\n              disabled={aiLoading}\n              className=\"flex-1 px-3 py-2 bg-[#f8f9fa] border border-[#e5e7eb] rounded-lg text-[#171532] placeholder:text-[#b0b0b0] focus:outline-none focus:border-purple-400 focus:bg-white disabled:opacity-50 transition-all text-xs\"\n            />\n            <button\n              onClick={() => handleSendMessage()}\n              disabled={aiLoading || !aiInput.trim()}\n              className=\"bg-gradient-to-r from-purple-500 to-blue-500 text-white px-3 py-2 rounded-lg font-semibold shadow-md shadow-purple-200 hover:shadow-lg hover:shadow-purple-300 transition-all disabled:opacity-50 disabled:shadow-none active:scale-95 flex items-center justify-center flex-shrink-0 h-10 w-10\"\n            >\n              <Send className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const renderAccountsTab = () => {\n    const filteredStudents = students.filter(s => \n      s.name.toLowerCase().includes(studentSearchQuery.toLowerCase()) || \n      s.code?.toLowerCase().includes(studentSearchQuery.toLowerCase())\n    );\n\n    const totalDep = filteredStudents.reduce((acc, s) => acc + (s.transactions?.filter(t => selectedAcademicYear === 'all' || (t.academicYear || '2024-25') === selectedAcademicYear).reduce((sum, t) => t.type === 'deposit' ? sum + t.amount : sum, 0) || 0), 0);\n    const totalWith = filteredStudents.reduce((acc, s) => acc + (s.transactions?.filter(t => selectedAcademicYear === 'all' || (t.academicYear || '2024-25') === selectedAcademicYear).reduce((sum, t) => t.type === 'withdraw' ? sum + t.amount : sum, 0) || 0), 0);\n    const currentBalance = totalDep - totalWith;\n\n    return (\n    <>\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center gap-2\">\n          <button onClick={() => setActiveTab(\"home\")} className=\"p-2 hover:bg-[#f0f0f0] rounded-lg transition-colors\">\n            <ChevronLeft className=\"w-5 h-5 text-[#4a6670]\" />\n          </button>\n          <div>\n            <h2 className=\"text-lg font-bold text-[#171532]\">All Accounts</h2>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <select\n            value={selectedAcademicYear}\n            onChange={(e) => setSelectedAcademicYear(e.target.value)}\n            className=\"px-3 py-2 bg-white border border-[#e5e7eb] rounded-xl text-xs font-semibold text-[#4a6670] focus:outline-none focus:ring-2 focus:ring-[#4a6670]/10 transition-all\"\n          >\n            <option value=\"all\">All Sessions</option>\n            {academicYears.map(year => (\n              <option key={year} value={year}>{year}</option>\n            ))}\n          </select>\n          <button \n            onClick={() => setShowCreateForm(true)}\n            className=\"flex items-center gap-1.5 bg-gradient-to-r from-[#4a6670] to-[#3d565e] text-white px-4 py-2.5 rounded-xl text-xs font-bold shadow-md shadow-[#4a6670]/20 hover:shadow-lg transition-all active:scale-95\"\n          >\n            <Plus className=\"w-4 h-4\" />\n            Add\n          </button>\n        </div>\n      </div>\n\n      <div className=\"relative mb-4\">\n        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[#747384]\" />\n        <input\n          type=\"text\"\n          placeholder=\"Search students by name or code...\"\n          value={studentSearchQuery}\n          onChange={(e) => setStudentSearchQuery(e.target.value)}\n          className=\"w-full pl-10 pr-4 py-3 bg-white border border-[#e5e7eb] rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#4a6670]/10 transition-all\"\n        />\n      </div>\n\n      {filteredStudents.length === 0 ? (\n        <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n          <Users className=\"w-14 h-14 text-[#e5e7eb] mb-3\" />\n          <p className=\"text-[#747384] font-medium text-sm mb-1\">No accounts found</p>\n          <p className=\"text-xs text-[#a0a0a0]\">Try a different search term</p>\n        </div>\n      ) : (\n        <div className=\"mb-6 overflow-x-auto\">\n          <div className=\"bg-white border border-[#e5e7eb] rounded-xl shadow-sm overflow-hidden\">\n            {/* Table Header */}\n            <div className=\"grid grid-cols-12 gap-3 bg-[#f8f9fa] p-4 border-b border-[#e5e7eb] font-semibold text-xs text-[#747384] sticky top-0\">\n              <div className=\"col-span-8\">Name</div>\n              <div className=\"col-span-4\">Balance</div>\n            </div>\n\n            {/* Table Body */}\n            <div className=\"divide-y divide-[#e5e7eb]\">\n              {filteredStudents.map((student, index) => {\n                const originalIndex = students.findIndex(s => s._id === student._id);\n                const studentBalance = student.transactions?.filter(t => selectedAcademicYear === 'all' || (t.academicYear || '2024-25') === selectedAcademicYear).reduce((acc, t) => t.type === 'deposit' ? acc + t.amount : acc - t.amount, 0) || 0;\n                return (\n                <div \n                  key={student._id || index} \n                  onClick={() => setViewingIndex(originalIndex)}\n                  className=\"grid grid-cols-12 gap-3 p-4 hover:bg-[#f8f9fa] cursor-pointer transition-colors\"\n                >\n                  <div className=\"col-span-8 flex items-center gap-2\">\n                    <div className={`w-8 h-8 rounded-full ${avatarColors[originalIndex % avatarColors.length]} flex items-center justify-center text-xs font-bold text-[#4a6670] flex-shrink-0`}>\n                      {student.name.charAt(0)}\n                    </div>\n                    <div className=\"flex flex-col truncate\">\n                      <span className=\"text-sm font-semibold text-[#171532] truncate\">{student.name}</span>\n                      <span className=\"text-[10px] text-gray-400 font-mono\">{student.code} • {student.academicYear || 'No Session'}</span>\n                    </div>\n                  </div>\n                  <div className=\"col-span-4 text-sm font-bold text-[#10B981]\">\n                    ₹{studentBalance.toFixed(2)}\n                  </div>\n                </div>\n              )})}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {viewingIndex !== null && renderAccountDetailView()}\n      {editingTransaction !== null && renderEditTransactionModal()}\n      {showDeleteConfirm && renderDeleteConfirmModal()}\n\n      {(showCreateForm || showEditForm) && (\n        <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-end sm:items-center justify-center z-50\">\n          <div className=\"bg-white rounded-t-3xl sm:rounded-2xl w-full sm:max-w-md max-h-[85vh] overflow-y-auto shadow-2xl animate-in slide-in-from-bottom duration-300\">\n            <div className=\"sticky top-0 bg-white flex items-center justify-between px-6 py-5 border-b border-[#f0f0f0]\">\n              <h3 className=\"text-xl font-bold text-[#171532]\">{showEditForm ? 'Edit Account' : 'Create Account'}</h3>\n              <button onClick={() => {setShowCreateForm(false); setShowEditForm(false); setEditingIndex(null); setUseOldCode(false); setOldStudentCode(\"\"); setNewStudent({ name: \"\", mobile: \"\", email: \"\", profileImage: \"\", academicYear: \"2025-26\" })}} className=\"w-8 h-8 flex items-center justify-center rounded-full bg-[#f5f5f5] text-[#747384] hover:bg-[#e5e5e5] transition-colors\">\n                <X className=\"w-4 h-4\" />\n              </button>\n            </div>\n            \n            <div className=\"px-6 py-6 space-y-5\">\n              {!showEditForm && (\n                <div className=\"flex items-center gap-2 mb-2 p-3 bg-blue-50 rounded-xl\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"useOldCode\"\n                    checked={useOldCode}\n                    onChange={(e) => setUseOldCode(e.target.checked)}\n                    className=\"w-4 h-4 text-[#4a6670]\"\n                  />\n                  <label htmlFor=\"useOldCode\" className=\"text-sm font-medium text-blue-800\">Use existing student code</label>\n                </div>\n              )}\n\n              {useOldCode && !showEditForm && (\n                <div className=\"space-y-2 mb-4\">\n                  <label className=\"block text-sm font-semibold text-[#171532]\">Old Student Code</label>\n                  <div className=\"relative\">\n                    <input\n                      type=\"text\"\n                      value={oldStudentCode}\n                      onChange={(e) => {\n                        const val = e.target.value.toUpperCase();\n                        setOldStudentCode(val);\n                        if (val.length >= 4) {\n                          handleSearchOldStudent(val);\n                        }\n                      }}\n                      placeholder=\"e.g., JD-1234\"\n                      className=\"w-full px-4 py-3 bg-[#f8f9fa] border border-[#e8e8e8] rounded-xl text-[#171532] focus:outline-none focus:border-[#4a6670]\"\n                    />\n                    {isSearchingOldStudent && (\n                      <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n                        <Loader className=\"w-4 h-4 animate-spin text-[#4a6670]\" />\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n\n              <div className=\"flex justify-center pb-2\">\n                <div className=\"relative\">\n                  <div className=\"w-24 h-24 bg-gradient-to-br from-[#e8f5f2] to-[#d4eef5] rounded-full flex items-center justify-center shadow-inner overflow-hidden\">\n                    {newStudent.profileImage ? (\n                      <img src={newStudent.profileImage} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n                    ) : (\n                      <Camera className=\"w-10 h-10 text-[#4a6670]\" />\n                    )}\n                  </div>\n                  <label htmlFor=\"profileImageInput\" className=\"absolute bottom-1 right-1 w-7 h-7 bg-[#4a6670] rounded-full flex items-center justify-center shadow-lg hover:bg-[#3d565e] transition-colors cursor-pointer\">\n                    <Plus className=\"w-4 h-4 text-white\" />\n                  </label>\n                  <input\n                    id=\"profileImageInput\"\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleImageUpload}\n                    className=\"hidden\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-[#171532] mb-2\">Full Name <span className=\"text-red-400\">*</span></label>\n                <input\n                  type=\"text\"\n                  value={newStudent.name}\n                  onChange={(e) => setNewStudent({...newStudent, name: e.target.value})}\n                  className=\"w-full px-4 py-3.5 bg-[#f8f9fa] border border-[#e8e8e8] rounded-xl focus:outline-none focus:border-[#4a6670] focus:bg-white focus:ring-2 focus:ring-[#4a6670]/10 transition-all text-[#171532] placeholder:text-[#a0a0a0]\"\n                  placeholder=\"Enter full name\"\n                />\n              </div>\n\n              {!showEditForm && (\n                <div>\n                  <label className=\"block text-sm font-semibold text-[#171532] mb-2\">Academic Session</label>\n                  <select\n                    value={newStudent.academicYear}\n                    onChange={(e) => setNewStudent({...newStudent, academicYear: e.target.value})}\n                    className=\"w-full px-4 py-3.5 bg-[#f8f9fa] border border-[#e8e8e8] rounded-xl focus:outline-none focus:border-[#4a6670] focus:bg-white focus:ring-2 focus:ring-[#4a6670]/10 transition-all text-[#171532]\"\n                  >\n                    {academicYears.map(year => (\n                      <option key={year} value={year}>{year}</option>\n                    ))}\n                  </select>\n                </div>\n              )}\n\n\n              <button\n                onClick={showEditForm ? handleUpdateAccount : handleCreateAccount}\n                className=\"w-full bg-[#4a6670] text-white py-4 rounded-xl font-semibold hover:bg-[#3d565e] transition-all shadow-lg shadow-[#4a6670]/20 mt-2\"\n              >\n                {showEditForm ? 'Update Account' : 'Create Account'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n    )\n  }\n\n  const renderCalendarTab = () => {\n    const today = new Date()\n    const year = today.getFullYear()\n    const month = today.getMonth()\n    const firstDay = new Date(year, month, 1).getDay()\n    const daysInMonth = new Date(year, month + 1, 0).getDate()\n    const days = []\n    \n    for (let i = 0; i < firstDay; i++) days.push(null)\n    for (let i = 1; i <= daysInMonth; i++) days.push(i)\n    \n    return (\n      <>\n        <div className=\"flex items-center gap-3 mb-6\">\n          <button onClick={() => setActiveTab(\"home\")} className=\"p-2 hover:bg-[#f0f0f0] rounded-lg transition-colors\">\n            <ChevronLeft className=\"w-6 h-6 text-[#4a6670]\" />\n          </button>\n          <h2 className=\"text-lg font-bold text-[#171532]\">Calendar</h2>\n        </div>\n        <div className=\"bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-2xl p-6 shadow-lg border border-[#5a7680]/50\">\n          <div className=\"text-center mb-6\">\n            <p className=\"text-2xl font-bold text-white\">{today.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}</p>\n          </div>\n          <div className=\"grid grid-cols-7 gap-2 mb-4\">\n            {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (\n              <div key={day} className=\"text-center text-xs font-bold text-white/70 py-2\">{day}</div>\n            ))}\n          </div>\n          <div className=\"grid grid-cols-7 gap-2\">\n            {days.map((day, idx) => (\n              <div key={idx} className={`aspect-square flex items-center justify-center rounded-lg font-semibold transition-colors ${\n                day === today.getDate() \n                  ? 'bg-[#c17f59] text-white shadow-md' \n                  : day \n                  ? 'bg-white/10 text-white hover:bg-white/20' \n                  : 'text-transparent'\n              }`}>\n                {day}\n              </div>\n            ))}\n          </div>\n        </div>\n      </>\n    )\n  }\n\n  const renderStatusTab = () => {\n    // Calculate site strength from system metrics\n    const cpuHealth = 100 - (systemStatus?.cpu?.percentage || 25);\n    const mongoHealth = Math.max(0, 100 - (systemStatus?.mongodb?.percentage || 29));\n    const responseHealth = Math.max(0, 100 - Math.min((systemStatus?.responseTime || 95) / 2, 50));\n    const siteStrength = Math.round((cpuHealth + mongoHealth + responseHealth) / 3)\n    \n    const uptime = systemStatus?.uptime || 86400;\n    const uptimeHours = Math.floor(uptime / 3600);\n    const uptimePercentage = Math.min(Math.round((uptimeHours / 168) * 100), 100); // Based on weekly uptime\n    \n    return (\n      <>\n        <div className=\"flex items-center justify-between gap-3 mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <button onClick={() => setActiveTab(\"home\")} className=\"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors\">\n              <ChevronLeft className=\"w-6 h-6 text-[#4a6670] dark:text-gray-300\" />\n            </button>\n            <h2 className=\"text-xl font-bold text-[#171532] dark:text-white\">System Status</h2>\n          </div>\n          <button\n            onClick={() => setTheme(theme === \"dark\" ? \"light\" : \"dark\")}\n            className=\"p-2 rounded-lg bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-600 transition-colors\"\n          >\n            {theme === \"dark\" ? (\n              <Sun className=\"w-5 h-5 text-yellow-500\" />\n            ) : (\n              <Moon className=\"w-5 h-5 text-gray-600\" />\n            )}\n          </button>\n        </div>\n        \n        <div className=\"space-y-4\">\n          {/* Service Statuses & System Status */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            {/* Service Statuses */}\n            <div className=\"bg-white dark:bg-slate-700 rounded-2xl p-5 border border-gray-200 dark:border-slate-600\">\n              <h3 className=\"text-[#171532] dark:text-white font-bold text-sm mb-4\">Service statuses</h3>\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-3 h-3 bg-green-400 rounded-full\"></div>\n                  <span className=\"text-[#747384] dark:text-gray-300 text-sm\">Start</span>\n                  <div className=\"flex-1 h-0.5 border-b border-dotted border-gray-500\"></div>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-3 h-3 bg-green-400 rounded-full\"></div>\n                  <span className=\"text-[#747384] dark:text-gray-300 text-sm\">Scoring</span>\n                  <div className=\"flex-1 h-0.5 border-b border-dotted border-gray-500\"></div>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-3 h-3 bg-green-400 rounded-full\"></div>\n                  <span className=\"text-[#747384] dark:text-gray-300 text-sm\">Receipt</span>\n                  <div className=\"flex-1 h-0.5 border-b border-dotted border-gray-500\"></div>\n                </div>\n              </div>\n            </div>\n\n            {/* System Status Traffic Light */}\n            <div className=\"bg-green-500 rounded-2xl p-5 flex flex-col items-center justify-center\">\n              <div className=\"flex flex-col gap-2 mb-3\">\n                <div className=\"w-10 h-4 rounded-full bg-red-600 shadow-lg\"></div>\n                <div className=\"w-10 h-4 rounded-full bg-yellow-500 shadow-lg\"></div>\n                <div className=\"w-10 h-4 rounded-full bg-green-400 shadow-lg animate-pulse\"></div>\n              </div>\n              <p className=\"text-white font-bold text-sm\">System is stable</p>\n            </div>\n          </div>\n\n          {/* Site Strength */}\n          <div className=\"bg-white dark:bg-slate-700 rounded-2xl p-5 border border-gray-200 dark:border-slate-600\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-[#171532] dark:text-white font-bold text-sm\">Site strength</h3>\n              <span className={`text-white text-xs font-bold px-3 py-1 rounded-full ${siteStrength >= 80 ? 'bg-green-500' : siteStrength >= 60 ? 'bg-yellow-500' : 'bg-red-500'}`}>\n                {siteStrength >= 80 ? 'Excellent' : siteStrength >= 60 ? 'Good' : 'Fair'}\n              </span>\n            </div>\n            \n            <div className=\"flex items-center gap-6\">\n              {/* Circular Progress */}\n              <div className=\"flex-shrink-0\">\n                <div className=\"relative w-28 h-28\">\n                  <svg className=\"w-full h-full transform -rotate-90\" viewBox=\"0 0 100 100\">\n                    <circle cx=\"50\" cy=\"50\" r=\"45\" fill=\"none\" stroke=\"#374151\" strokeWidth=\"3\" />\n                    <circle \n                      cx=\"50\" \n                      cy=\"50\" \n                      r=\"45\" \n                      fill=\"none\" \n                      stroke=\"#22c55e\" \n                      strokeWidth=\"3\"\n                      strokeDasharray={`${siteStrength * 2.83} 283`}\n                      strokeLinecap=\"round\"\n                    />\n                  </svg>\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <span className=\"text-[#171532] dark:text-white font-bold text-2xl\">{siteStrength}%</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Health Stats */}\n              <div className=\"flex-1 space-y-4\">\n                <div>\n                  <div className=\"flex justify-between items-center mb-2\">\n                    <span className=\"text-[#747384] dark:text-gray-300 text-sm\">CPU Health</span>\n                    <span className=\"text-[#171532] dark:text-white font-bold text-sm\">{cpuHealth}%</span>\n                  </div>\n                  <div className=\"w-full h-2 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden\">\n                    <div className=\"h-full bg-blue-500\" style={{width: `${cpuHealth}%`}}></div>\n                  </div>\n                </div>\n                <div>\n                  <div className=\"flex justify-between items-center mb-2\">\n                    <span className=\"text-[#747384] dark:text-gray-300 text-sm\">Storage Health</span>\n                    <span className=\"text-[#171532] dark:text-white font-bold text-sm\">{mongoHealth}%</span>\n                  </div>\n                  <div className=\"w-full h-2 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden\">\n                    <div className=\"h-full bg-orange-500\" style={{width: `${mongoHealth}%`}}></div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* System Resources */}\n          <div className=\"grid grid-cols-2 gap-3 mb-8\">\n            <div className=\"bg-white dark:bg-slate-700 rounded-lg p-3 border border-gray-200 dark:border-slate-600\">\n              <p className=\"text-[#747384] dark:text-gray-400 text-xs mb-1\">MongoDB</p>\n              <p className=\"text-[#171532] dark:text-white font-bold text-sm mb-2\">{Math.max((systemStatus?.mongodb?.used * 1024 || 0)).toFixed(1)} MB</p>\n              <div className=\"w-full h-1.5 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden\">\n                <div className=\"h-full bg-orange-500\" style={{width: `${systemStatus?.mongodb?.percentage || 29}%`}}></div>\n              </div>\n            </div>\n            <div className=\"bg-white dark:bg-slate-700 rounded-lg p-3 border border-gray-200 dark:border-slate-600\">\n              <p className=\"text-[#747384] dark:text-gray-400 text-xs mb-1\">CPU Usage</p>\n              <p className=\"text-[#171532] dark:text-white font-bold text-sm mb-2\">{systemStatus?.cpu?.percentage || 25}%</p>\n              <div className=\"w-full h-1.5 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden\">\n                <div className=\"h-full bg-blue-500\" style={{width: `${systemStatus?.cpu?.percentage || 25}%`}}></div>\n              </div>\n            </div>\n            <div className=\"bg-white dark:bg-slate-700 rounded-lg p-3 col-span-2 border border-gray-200 dark:border-slate-600\">\n              <p className=\"text-[#747384] dark:text-gray-400 text-xs mb-1\">Response Time</p>\n              <p className=\"text-[#171532] dark:text-white font-bold text-sm\">{systemStatus?.responseTime || 95}ms</p>\n            </div>\n          </div>\n        </div>\n      </>\n    )\n  }\n\n  return (\n    <div className={`min-h-screen pb-24 ${activeTab === \"status\" ? \"bg-white dark:bg-slate-800\" : \"bg-white dark:bg-slate-900\"}`}>\n      <div className={`px-5 pt-6 ${activeTab === \"status\" ? \"text-[#171532] dark:text-white\" : \"\"}`}>\n        {renderNotification()}\n        {showDepositModal && renderDepositModal()}\n        {showWithdrawModal && renderWithdrawModal()}\n        {activeTab === \"home\" && renderHomeTab()}\n        {activeTab === \"reports\" && renderReportsTab()}\n        {activeTab === \"accounts\" && renderAccountsTab()}\n        {activeTab === \"leaderboard\" && renderLeaderboardTab()}\n        {activeTab === \"ai\" && renderAITab()}\n        {activeTab === \"year\" && renderYearTab()}\n        {activeTab === \"calendar\" && renderCalendarTab()}\n        {activeTab === \"status\" && renderStatusTab()}\n        {activeTab === \"profile\" && (\n          <div className=\"space-y-5\">\n            <h2 className=\"text-lg font-bold text-[#171532]\">Admin Profile</h2>\n            \n            <div className=\"bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-2xl p-8 text-white\">\n              <div className=\"flex flex-col items-center text-center space-y-3\">\n                <img src=\"/admin-profile.jpg\" alt=\"Admin Profile\" className=\"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-white/20\" />\n                <div>\n                  <p className=\"text-xl font-bold\">{adminName}</p>\n                  <p className=\"text-sm text-white/70\">@{adminUsername}</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Danger Zone */}\n            <div className=\"bg-white dark:bg-slate-800 rounded-2xl p-5 border border-red-100 dark:border-red-900/30 shadow-sm space-y-4\">\n              <div className=\"flex items-center gap-2 text-red-600\">\n                <AlertCircle className=\"w-5 h-5\" />\n                <h3 className=\"font-bold\">Danger Zone</h3>\n              </div>\n              <p className=\"text-xs text-gray-500\">Actions in this section are permanent and cannot be undone.</p>\n              \n              <div className=\"grid grid-cols-1 gap-3 pt-2\">\n                <button\n                  onClick={() => handleBulkDelete('transactions')}\n                  className=\"flex items-center justify-between p-4 bg-red-50 dark:bg-red-900/10 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-900/30 transition-colors group\"\n                >\n                  <div className=\"text-left\">\n                    <p className=\"text-sm font-bold text-red-700 dark:text-red-400\">Clear All Transactions</p>\n                    <p className=\"text-[10px] text-red-600/70\">Resets all student balances to ₹0.00</p>\n                  </div>\n                  <Trash2 className=\"w-5 h-5 text-red-400 group-hover:text-red-600 transition-colors\" />\n                </button>\n\n                <button\n                  onClick={() => handleBulkDelete('students')}\n                  className=\"flex items-center justify-between p-4 bg-red-600 hover:bg-red-700 rounded-xl border border-red-700 transition-colors group shadow-md shadow-red-200 dark:shadow-none\"\n                >\n                  <div className=\"text-left\">\n                    <p className=\"text-sm font-bold text-white\">Delete All Students</p>\n                    <p className=\"text-[10px] text-white/70\">Permanently wipes the entire student database</p>\n                  </div>\n                  <Trash2 className=\"w-5 h-5 text-white/50 group-hover:text-white transition-colors\" />\n                </button>\n              </div>\n            </div>\n\n            <div className=\"space-y-2 bg-white dark:bg-slate-800 border border-[#e5e7eb] dark:border-slate-700 rounded-2xl p-3\">\n              <div>\n                <p className=\"text-xs font-semibold text-[#747384] dark:text-gray-400 mb-1\">Admin Name</p>\n                <p className=\"text-sm font-bold text-[#171532] dark:text-white\">{adminName}</p>\n              </div>\n\n              <div className=\"pt-2 border-t border-[#e5e7eb] dark:border-slate-700\">\n                <p className=\"text-xs font-semibold text-[#747384] dark:text-gray-400 mb-1\">Username</p>\n                <p className=\"text-sm font-bold text-[#171532] dark:text-white\">@{adminUsername}</p>\n              </div>\n\n              <div className=\"pt-2 border-t border-[#e5e7eb] dark:border-slate-700\">\n                <p className=\"text-xs font-semibold text-[#747384] dark:text-gray-400 mb-1\">Password</p>\n                <p className=\"text-sm font-bold text-[#171532] dark:text-white\">{adminPassword}</p>\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <button\n                onClick={() => setShowPasswordReset(!showPasswordReset)}\n                className=\"w-full flex items-center gap-3 bg-white border border-[#e5e7eb] rounded-xl p-4 hover:bg-[#f8f9fa] transition-colors\"\n              >\n                <Lock className=\"w-5 h-5 text-[#4a6670]\" />\n                <span className=\"font-medium text-[#171532]\">Reset Password</span>\n              </button>\n\n              <button\n                onClick={() => {\n                  const text = `Check out JDSA Students Bank: ${window.location.origin}`\n                  if (navigator.share) {\n                    navigator.share({\n                      title: \"JDSA Students Bank\",\n                      text: text,\n                    })\n                  } else {\n                    alert(text)\n                  }\n                }}\n                className=\"w-full flex items-center gap-3 bg-white border border-[#e5e7eb] rounded-xl p-4 hover:bg-[#f8f9fa] transition-colors\"\n              >\n                <Share2 className=\"w-5 h-5 text-[#4a6670]\" />\n                <span className=\"font-medium text-[#171532]\">Share Website</span>\n              </button>\n\n              <button\n                onClick={() => setShowLogoutConfirm(true)}\n                className=\"w-full flex items-center gap-3 bg-red-50 border border-red-200 rounded-xl p-4 hover:bg-red-100 transition-colors\"\n              >\n                <LogOut className=\"w-5 h-5 text-red-600\" />\n                <span className=\"font-medium text-red-600\">Logout</span>\n              </button>\n            </div>\n\n            <div className=\"text-center pt-2 pb-4\">\n              <p className=\"text-xs font-semibold text-[#747384]\">v1.0.0</p>\n            </div>\n\n            {showLogoutConfirm && (\n              <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[100]\">\n                <div className=\"bg-white rounded-2xl w-full max-w-sm mx-4 shadow-2xl animate-in scale-in duration-200\">\n                  <div className=\"px-6 py-6 space-y-4\">\n                    <div className=\"flex items-center justify-center w-12 h-12 rounded-full bg-red-100 mx-auto\">\n                      <LogOut className=\"w-6 h-6 text-red-600\" />\n                    </div>\n                    \n                    <div className=\"text-center\">\n                      <h3 className=\"text-xl font-bold text-[#171532] mb-2\">Logout</h3>\n                      <p className=\"text-sm text-[#747384]\">\n                        Are you sure you want to logout? You'll need to sign in again to access the admin dashboard.\n                      </p>\n                    </div>\n\n                    <div className=\"flex gap-3 pt-4\">\n                      <button\n                        onClick={() => setShowLogoutConfirm(false)}\n                        className=\"flex-1 py-3 rounded-xl font-semibold text-[#171532] bg-[#f0f0f0] hover:bg-[#e5e5e5] transition-colors\"\n                      >\n                        Cancel\n                      </button>\n                      <button\n                        onClick={async () => {\n                          try {\n                            await fetch('/api/auth/logout', { method: 'POST' })\n                          } catch (error) {\n                            console.error('Logout error:', error)\n                          } finally {\n                            router.push(\"/login\")\n                          }\n                        }}\n                        className=\"flex-1 py-3 rounded-xl font-semibold text-white bg-red-600 hover:bg-red-700 transition-colors\"\n                      >\n                        Logout\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {showPasswordReset && (\n              <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-end sm:items-center justify-center z-50\">\n                <div className=\"bg-white rounded-t-3xl sm:rounded-2xl w-full sm:max-w-md shadow-2xl animate-in slide-in-from-bottom duration-300\">\n                  <div className=\"sticky top-0 bg-white flex items-center justify-between px-6 py-5 border-b border-[#f0f0f0]\">\n                    <h3 className=\"text-xl font-bold text-[#171532]\">Reset Password</h3>\n                    <button onClick={() => setShowPasswordReset(false)} className=\"w-8 h-8 flex items-center justify-center rounded-full bg-[#f5f5f5] text-[#747384] hover:bg-[#e5e5e5] transition-colors\">\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                  <div className=\"px-6 py-6 space-y-4\">\n                    <div>\n                      <label className=\"block text-sm font-semibold text-[#171532] mb-2\">Current Password</label>\n                      <input\n                        type=\"password\"\n                        value={currentPassword}\n                        onChange={(e) => setCurrentPassword(e.target.value)}\n                        className=\"w-full px-4 py-3 bg-[#f8f9fa] border border-[#e8e8e8] rounded-xl focus:outline-none focus:border-[#4a6670] focus:ring-2 focus:ring-[#4a6670]/10 text-[#171532]\"\n                        placeholder=\"Enter current password\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold text-[#171532] mb-2\">New Password</label>\n                      <input\n                        type=\"password\"\n                        value={newPassword}\n                        onChange={(e) => setNewPassword(e.target.value)}\n                        className=\"w-full px-4 py-3 bg-[#f8f9fa] border border-[#e8e8e8] rounded-xl focus:outline-none focus:border-[#4a6670] focus:ring-2 focus:ring-[#4a6670]/10 text-[#171532]\"\n                        placeholder=\"Enter new password (min 6 characters)\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold text-[#171532] mb-2\">Confirm Password</label>\n                      <input\n                        type=\"password\"\n                        value={confirmPassword}\n                        onChange={(e) => setConfirmPassword(e.target.value)}\n                        className=\"w-full px-4 py-3 bg-[#f8f9fa] border border-[#e8e8e8] rounded-xl focus:outline-none focus:border-[#4a6670] focus:ring-2 focus:ring-[#4a6670]/10 text-[#171532]\"\n                        placeholder=\"Confirm new password\"\n                      />\n                    </div>\n                    <button\n                      onClick={async () => {\n                        if (!currentPassword) {\n                          toast.error(\"Current password is required\")\n                          return\n                        }\n                        if (newPassword.length < 6) {\n                          toast.error(\"New password must be at least 6 characters\")\n                          return\n                        }\n                        if (newPassword !== confirmPassword) {\n                          toast.error(\"Passwords do not match\")\n                          return\n                        }\n                        \n                        try {\n                          const response = await fetch('/api/admin/change-password', {\n                            method: 'POST',\n                            headers: { 'Content-Type': 'application/json' },\n                            body: JSON.stringify({ currentPassword, newPassword })\n                          })\n                          \n                          if (response.ok) {\n                            toast.success(\"✓ Password changed successfully\")\n                            setShowPasswordReset(false)\n                            setCurrentPassword(\"\")\n                            setNewPassword(\"\")\n                            setConfirmPassword(\"\")\n                          } else {\n                            const error = await response.json()\n                            toast.error(error.error || \"Failed to change password\")\n                          }\n                        } catch (error) {\n                          toast.error(\"Error changing password\")\n                        }\n                      }}\n                      className=\"w-full bg-[#4a6670] text-white py-3 rounded-xl font-semibold hover:bg-[#3d565e] transition-colors\"\n                    >\n                      Change Password\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n        {activeTab === \"cards\" && (\n          <div className=\"text-center py-12 text-[#747384]\">\n            <CreditCard className=\"w-16 h-16 mx-auto mb-4 opacity-30\" />\n            <p>Cards feature coming soon</p>\n          </div>\n        )}\n        {activeTab === \"more\" && (\n          <div className=\"text-center py-12 text-[#747384]\">\n            <MoreHorizontal className=\"w-16 h-16 mx-auto mb-4 opacity-30\" />\n            <p>More options coming soon</p>\n          </div>\n        )}\n      </div>\n\n      <div className=\"fixed bottom-0 left-0 right-0 px-4 pb-4 z-20 bg-gradient-to-t from-white via-white to-transparent pt-4\">\n        <div className=\"max-w-md mx-auto bg-gradient-to-r from-[#e8f4f8] to-[#d4eef5] rounded-2xl px-6 py-3 flex items-center justify-between shadow-lg\">\n          <button\n            onClick={() => setActiveTab(\"home\")}\n            className={`flex items-center justify-center p-2 rounded-xl transition-all ${\n              activeTab === \"home\"\n                ? \"bg-[#c17f59] text-white shadow-md\"\n                : \"text-[#4a6670]\"\n            }`}\n            title=\"Home\"\n          >\n            <Home className=\"w-5 h-5\" />\n          </button>\n          \n          <button\n            onClick={() => setActiveTab(\"accounts\")}\n            className={`flex items-center justify-center p-2 rounded-xl transition-all ${\n              activeTab === \"accounts\"\n                ? \"bg-[#c17f59] text-white shadow-md\"\n                : \"text-[#4a6670]\"\n            }`}\n            title=\"Accounts\"\n          >\n            <Users className=\"w-5 h-5\" />\n          </button>\n\n          <Link href=\"/admin/manage-transactions\">\n            <button className=\"flex items-center justify-center p-2 rounded-xl transition-all text-[#4a6670] hover:bg-[#f0f0f0]\" title=\"Edit Transactions\">\n              <Edit className=\"w-5 h-5\" />\n            </button>\n          </Link>\n\n          <Link href=\"/admin/upload-transactions\">\n            <button className=\"flex items-center justify-center p-2 rounded-xl transition-all text-[#4a6670] hover:bg-[#f0f0f0]\" title=\"Upload Transactions\">\n              <Upload className=\"w-5 h-5\" />\n            </button>\n          </Link>\n\n          <button\n            onClick={() => setActiveTab(\"profile\")}\n            className={`flex items-center justify-center p-2 rounded-xl transition-all ${\n              activeTab === \"profile\"\n                ? \"bg-[#c17f59] text-white shadow-md\"\n                : \"text-[#4a6670]\"\n            }`}\n            title=\"Admin Profile\"\n          >\n            <Settings className=\"w-5 h-5\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}