{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/gemini/route.ts"],"sourcesContent":["import { GoogleGenAI } from \"@google/genai\";\nimport { NextRequest, NextResponse } from \"next/server\";\n\nconst ai = new GoogleGenAI({ apiKey: process.env.GEMINI_API_KEY || \"\" });\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { message, studentContext, adminName } = await request.json();\n\n    if (!message) {\n      return NextResponse.json(\n        { error: \"Message is required\" },\n        { status: 400 }\n      );\n    }\n\n    // Build comprehensive context for AI\n    let fullContext = `You are an AI assistant for JDSA Students Bank admin dashboard. \nCurrent Admin: ${adminName || \"Admin\"}\n\nSystem Information:\n${studentContext ? `Student Database: ${studentContext}` : \"\"}\n\nUser Request: ${message}`;\n\n    const model = ai.getGenerativeModel({ model: \"gemini-1.5-flash\" });\n    const result = await model.generateContent(fullContext);\n    const response = await result.response;\n    const text = response.text();\n\n    return NextResponse.json({ response: text });\n  } catch (error) {\n    console.error(\"Gemini API Error:\", error);\n    return NextResponse.json(\n      { error: \"Failed to process request\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,KAAK,IAAI,4KAAW,CAAC;IAAE,QAAQ,QAAQ,GAAG,CAAC,cAAc,IAAI;AAAG;AAE/D,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,cAAc,EAAE,SAAS,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEjE,IAAI,CAAC,SAAS;YACZ,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAsB,GAC/B;gBAAE,QAAQ;YAAI;QAElB;QAEA,qCAAqC;QACrC,IAAI,cAAc,CAAC;eACR,EAAE,aAAa,QAAQ;;;AAGtC,EAAE,iBAAiB,CAAC,kBAAkB,EAAE,gBAAgB,GAAG,GAAG;;cAEhD,EAAE,SAAS;QAErB,MAAM,QAAQ,GAAG,kBAAkB,CAAC;YAAE,OAAO;QAAmB;QAChE,MAAM,SAAS,MAAM,MAAM,eAAe,CAAC;QAC3C,MAAM,WAAW,MAAM,OAAO,QAAQ;QACtC,MAAM,OAAO,SAAS,IAAI;QAE1B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,UAAU;QAAK;IAC5C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA4B,GACrC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}