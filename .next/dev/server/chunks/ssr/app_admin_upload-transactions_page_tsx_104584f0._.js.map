{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/admin/upload-transactions/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { ArrowLeft, Upload, Loader } from \"lucide-react\"\nimport { toast } from \"sonner\"\nimport * as XLSX from \"xlsx\"\n\ninterface ExcelTransaction {\n  studentCode: string\n  date: string\n  type: \"deposit\" | \"withdrawal\" | \"withdraw\"\n  amount: number\n}\n\n// Helper function to parse dates from various formats\nfunction parseDate(dateStr: any): string | null {\n  if (!dateStr) return null\n\n  // If it's a number (Excel serial date)\n  if (typeof dateStr === \"number\") {\n    const excelDate = new Date((dateStr - 25569) * 86400 * 1000)\n    return excelDate.toLocaleDateString(\"en-GB\").split(\"/\").reverse().join(\"-\") // YYYY-MM-DD format\n  }\n\n  // If it's a string, try to parse it\n  const str = String(dateStr).trim()\n\n  // Try DD/MM/YYYY format\n  const ddmmyyyyMatch = str.match(/^(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})$/)\n  if (ddmmyyyyMatch) {\n    const [, day, month, year] = ddmmyyyyMatch\n    const date = new Date(parseInt(year), parseInt(month) - 1, parseInt(day))\n    if (!isNaN(date.getTime())) {\n      return `${day.padStart(2, \"0\")}/${month.padStart(2, \"0\")}/${year}`\n    }\n  }\n\n  // Try YYYY-MM-DD format\n  const yyyymmddMatch = str.match(/^(\\d{4})-(\\d{1,2})-(\\d{1,2})$/)\n  if (yyyymmddMatch) {\n    const [, year, month, day] = yyyymmddMatch\n    const date = new Date(parseInt(year), parseInt(month) - 1, parseInt(day))\n    if (!isNaN(date.getTime())) {\n      return `${day.padStart(2, \"0\")}/${month.padStart(2, \"0\")}/${year}`\n    }\n  }\n\n  // Try MM/DD/YYYY format\n  const mmddyyyyMatch = str.match(/^(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})$/)\n  if (mmddyyyyMatch) {\n    const [, month, day, year] = mmddyyyyMatch\n    const date = new Date(parseInt(year), parseInt(month) - 1, parseInt(day))\n    if (!isNaN(date.getTime())) {\n      return `${day.padStart(2, \"0\")}/${month.padStart(2, \"0\")}/${year}`\n    }\n  }\n\n  // Try parsing as ISO date\n  const isoDate = new Date(str)\n  if (!isNaN(isoDate.getTime())) {\n    return isoDate.toLocaleDateString(\"en-GB\").split(\"/\").reverse().join(\"-\").replace(/-/g, \"/\").split(\"/\").reverse().join(\"/\")\n  }\n\n  return null\n}\n\n// Function to parse CSV\nfunction parseCSV(text: string): any[] {\n  const lines = text.trim().split(\"\\n\")\n  if (lines.length === 0) return []\n\n  // Parse header\n  const headers = lines[0].split(\",\").map((h) => h.trim())\n  const data: any[] = []\n\n  // Find column indices\n  const studentCodeIdx = headers.findIndex((h) =>\n    h.toLowerCase().includes(\"code\") || h.toLowerCase().includes(\"student\")\n  )\n  const dateIdx = headers.findIndex((h) => h.toLowerCase().includes(\"date\"))\n  const typeIdx = headers.findIndex((h) => h.toLowerCase().includes(\"type\"))\n  const amountIdx = headers.findIndex((h) => h.toLowerCase().includes(\"amount\"))\n\n  // Parse rows\n  for (let i = 1; i < lines.length; i++) {\n    const values = lines[i].split(\",\").map((v) => v.trim())\n    if (values.length > Math.max(studentCodeIdx, dateIdx, typeIdx, amountIdx)) {\n      data.push({\n        studentCode: values[studentCodeIdx] || \"\",\n        date: values[dateIdx] || \"\",\n        type: (values[typeIdx] || \"\").toLowerCase(),\n        amount: parseFloat(values[amountIdx]) || 0,\n      })\n    }\n  }\n\n  return data\n}\n\nexport default function UploadTransactions() {\n  const router = useRouter()\n  const fileInputRef = useRef<HTMLInputElement>(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [previewData, setPreviewData] = useState<ExcelTransaction[]>([])\n  const [fileName, setFileName] = useState(\"\")\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0]\n    if (!file) return\n\n    setFileName(file.name)\n    const reader = new FileReader()\n\n    reader.onload = (e) => {\n      try {\n        let jsonData: any[] = []\n\n        if (file.name.endsWith(\".csv\")) {\n          // Parse CSV\n          const text = e.target?.result as string\n          jsonData = parseCSV(text)\n        } else {\n          // Parse Excel\n          const data = e.target?.result as ArrayBuffer\n          const workbook = XLSX.read(data, { type: \"array\" })\n          const worksheet = workbook.Sheets[workbook.SheetNames[0]]\n          jsonData = XLSX.utils.sheet_to_json(worksheet)\n        }\n\n        // Validate and transform data\n        const transactions: ExcelTransaction[] = jsonData\n          .map((row: any) => {\n            const parsedDate = parseDate(row[\"Date\"] || row[\"date\"] || \"\")\n            return {\n              studentCode: String(\n                row[\"Student Code\"] || row[\"Code\"] || row[\"StudentCode\"] || row[\"studentCode\"] || \"\"\n              ).trim(),\n              date: parsedDate || \"\",\n              type: String(row[\"Type\"] || row[\"type\"] || \"\").toLowerCase().trim() as \"deposit\" | \"withdrawal\" | \"withdraw\",\n              amount: parseFloat(row[\"Amount\"] || row[\"amount\"] || 0),\n            }\n          })\n          .filter((t) => {\n            // Validate each transaction\n            if (!t.studentCode) {\n              return false\n            }\n            if (!t.date) {\n              toast.warning(`Row skipped (${t.studentCode}): Invalid or missing date`)\n              return false\n            }\n            if (![\"deposit\", \"withdrawal\", \"withdraw\"].includes(t.type)) {\n              toast.warning(\n                `Row skipped (${t.studentCode}): Invalid type (must be 'deposit', 'withdrawal', or 'withdraw')`\n              )\n              return false\n            }\n            if (isNaN(t.amount) || t.amount <= 0) {\n              toast.warning(`Row skipped (${t.studentCode}): Invalid amount`)\n              return false\n            }\n            return true\n          })\n\n        if (transactions.length === 0) {\n          toast.error(\"No valid transactions found in the file\")\n          setPreviewData([])\n          setFileName(\"\")\n          return\n        }\n\n        setPreviewData(transactions)\n        toast.success(`âœ“ Loaded ${transactions.length} transactions`)\n      } catch (error) {\n        console.error(\"Error reading file:\", error)\n        toast.error(\"Failed to read file\")\n        setFileName(\"\")\n        setPreviewData([])\n      }\n    }\n\n    if (file.name.endsWith(\".csv\")) {\n      reader.readAsText(file)\n    } else {\n      reader.readAsArrayBuffer(file)\n    }\n  }\n\n  const handleUpload = async () => {\n    if (previewData.length === 0) {\n      toast.error(\"No transactions to upload\")\n      return\n    }\n\n    setIsLoading(true)\n    try {\n      const response = await fetch(\"/api/students/bulk-transaction\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ transactions: previewData }),\n      })\n\n      const result = await response.json()\n\n      if (!response.ok) {\n        toast.error(result.error || \"Failed to upload transactions\")\n        return\n      }\n\n      toast.success(\n        `âœ“ Successfully uploaded ${result.successCount} transactions. ${\n          result.failureCount > 0 ? `${result.failureCount} failed.` : \"\"\n        }`\n      )\n      setPreviewData([])\n      setFileName(\"\")\n      if (fileInputRef.current) {\n        fileInputRef.current.value = \"\"\n      }\n    } catch (error) {\n      console.error(\"Error uploading transactions:\", error)\n      toast.error(\"Error uploading transactions\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-[#f8f9fa] to-[#e8eef5] p-4\">\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center gap-3 mb-6 pt-4\">\n          <button\n            onClick={() => router.back()}\n            className=\"p-2 hover:bg-white rounded-lg transition-colors\"\n          >\n            <ArrowLeft className=\"w-5 h-5 text-[#4a6670]\" />\n          </button>\n          <h1 className=\"text-3xl font-bold text-[#171532]\">Upload Transactions</h1>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* Upload Section */}\n          <div className=\"lg:col-span-2 bg-white rounded-2xl shadow-lg p-6\">\n            <h2 className=\"text-xl font-semibold text-[#171532] mb-4\">Import Excel or CSV File</h2>\n\n            <div\n              className=\"border-2 border-dashed border-[#d1d5db] rounded-xl p-8 text-center cursor-pointer hover:border-[#4a6670] hover:bg-[#f8f9fa] transition-all\"\n              onClick={() => fileInputRef.current?.click()}\n            >\n              <Upload className=\"w-12 h-12 text-[#747384] mx-auto mb-3\" />\n              <p className=\"text-[#171532] font-semibold mb-2\">Click to select file</p>\n              <p className=\"text-sm text-[#747384]\">\n                Supports .xlsx, .xls, .csv files with columns: Student Code, Date, Type, Amount\n              </p>\n              {fileName && (\n                <p className=\"text-sm text-green-600 mt-3 font-medium\">\n                  Selected: {fileName}\n                </p>\n              )}\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\".xlsx,.xls,.csv\"\n                onChange={handleFileSelect}\n                className=\"hidden\"\n              />\n            </div>\n\n            <div className=\"mt-6 p-4 bg-[#f0f4ff] rounded-lg border border-[#d1d5db]\">\n              <h3 className=\"text-sm font-semibold text-[#171532] mb-2\">File Format:</h3>\n              <ul className=\"text-sm text-[#747384] space-y-1\">\n                <li>â€¢ <strong>Student Code:</strong> Student's unique code (required)</li>\n                <li>â€¢ <strong>Date:</strong> Transaction date (formats: dd/MM/yyyy, MM/DD/YYYY, or YYYY-MM-DD) - (required)</li>\n                <li>â€¢ <strong>Type:</strong> Either \"deposit\", \"withdrawal\", or \"withdraw\" (required)</li>\n                <li>â€¢ <strong>Amount:</strong> Transaction amount as number (required)</li>\n              </ul>\n            </div>\n\n            <div className=\"mt-6\">\n              <h3 className=\"text-sm font-semibold text-[#171532] mb-3\">Download Sample Files:</h3>\n              <div className=\"grid grid-cols-1 gap-2\">\n                <div>\n                  <p className=\"text-xs font-medium text-[#747384] mb-2\">Mixed Deposits & Withdrawals:</p>\n                  <div className=\"flex gap-2\">\n                    <a\n                      href=\"/samples/sample_mixed_transactions.xlsx\"\n                      download\n                      className=\"flex-1 text-sm text-blue-600 hover:text-blue-700 hover:underline font-medium\"\n                    >\n                      ðŸ“„ Excel\n                    </a>\n                    <a\n                      href=\"/samples/sample_mixed_transactions.csv\"\n                      download\n                      className=\"flex-1 text-sm text-blue-600 hover:text-blue-700 hover:underline font-medium\"\n                    >\n                      ðŸ“„ CSV\n                    </a>\n                  </div>\n                </div>\n                <div>\n                  <p className=\"text-xs font-medium text-[#747384] mb-2\">Deposits Only:</p>\n                  <div className=\"flex gap-2\">\n                    <a\n                      href=\"/samples/sample_deposits.xlsx\"\n                      download\n                      className=\"flex-1 text-sm text-green-600 hover:text-green-700 hover:underline font-medium\"\n                    >\n                      ðŸ“„ Excel\n                    </a>\n                    <a\n                      href=\"/samples/sample_deposits.csv\"\n                      download\n                      className=\"flex-1 text-sm text-green-600 hover:text-green-700 hover:underline font-medium\"\n                    >\n                      ðŸ“„ CSV\n                    </a>\n                  </div>\n                </div>\n                <div>\n                  <p className=\"text-xs font-medium text-[#747384] mb-2\">Withdrawals Only:</p>\n                  <div className=\"flex gap-2\">\n                    <a\n                      href=\"/samples/sample_withdrawals.xlsx\"\n                      download\n                      className=\"flex-1 text-sm text-red-600 hover:text-red-700 hover:underline font-medium\"\n                    >\n                      ðŸ“„ Excel\n                    </a>\n                    <a\n                      href=\"/samples/sample_withdrawals.csv\"\n                      download\n                      className=\"flex-1 text-sm text-red-600 hover:text-red-700 hover:underline font-medium\"\n                    >\n                      ðŸ“„ CSV\n                    </a>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {previewData.length > 0 && (\n              <div className=\"mt-6\">\n                <button\n                  onClick={handleUpload}\n                  disabled={isLoading}\n                  className=\"w-full flex items-center justify-center gap-2 bg-[#4a6670] hover:bg-[#3d565e] disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-3 rounded-lg font-semibold transition-colors\"\n                >\n                  {isLoading ? (\n                    <>\n                      <Loader className=\"w-4 h-4 animate-spin\" />\n                      Uploading...\n                    </>\n                  ) : (\n                    <>\n                      <Upload className=\"w-4 h-4\" />\n                      Upload {previewData.length} Transactions\n                    </>\n                  )}\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Preview Section */}\n          <div className=\"bg-white rounded-2xl shadow-lg p-6\">\n            <h2 className=\"text-xl font-semibold text-[#171532] mb-4\">Preview</h2>\n\n            {previewData.length > 0 ? (\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                {previewData.map((transaction, idx) => (\n                  <div key={idx} className=\"border border-[#e5e7eb] rounded-lg p-3\">\n                    <p className=\"text-xs font-medium text-[#747384] mb-1\">\n                      {transaction.studentCode}\n                    </p>\n                    <p className=\"text-sm text-[#171532] font-semibold\">{transaction.date}</p>\n                    <div className=\"flex items-center justify-between mt-2\">\n                      <span\n                        className={`text-xs font-medium px-2 py-1 rounded capitalize ${\n                          transaction.type === \"deposit\"\n                            ? \"bg-green-100 text-green-700\"\n                            : \"bg-red-100 text-red-700\"\n                        }`}\n                      >\n                        {transaction.type}\n                      </span>\n                      <span className=\"text-sm font-bold text-[#171532]\">\n                        â‚¹{transaction.amount.toFixed(2)}\n                      </span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <p className=\"text-[#747384]\">No transactions loaded</p>\n                <p className=\"text-xs text-[#747384] mt-2\">\n                  Select a file to see a preview\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AANA;;;;;;;AAeA,sDAAsD;AACtD,SAAS,UAAU,OAAY;IAC7B,IAAI,CAAC,SAAS,OAAO;IAErB,uCAAuC;IACvC,IAAI,OAAO,YAAY,UAAU;QAC/B,MAAM,YAAY,IAAI,KAAK,CAAC,UAAU,KAAK,IAAI,QAAQ;QACvD,OAAO,UAAU,kBAAkB,CAAC,SAAS,KAAK,CAAC,KAAK,OAAO,GAAG,IAAI,CAAC,KAAK,oBAAoB;;IAClG;IAEA,oCAAoC;IACpC,MAAM,MAAM,OAAO,SAAS,IAAI;IAEhC,wBAAwB;IACxB,MAAM,gBAAgB,IAAI,KAAK,CAAC;IAChC,IAAI,eAAe;QACjB,MAAM,GAAG,KAAK,OAAO,KAAK,GAAG;QAC7B,MAAM,OAAO,IAAI,KAAK,SAAS,OAAO,SAAS,SAAS,GAAG,SAAS;QACpE,IAAI,CAAC,MAAM,KAAK,OAAO,KAAK;YAC1B,OAAO,GAAG,IAAI,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,MAAM,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,MAAM;QACpE;IACF;IAEA,wBAAwB;IACxB,MAAM,gBAAgB,IAAI,KAAK,CAAC;IAChC,IAAI,eAAe;QACjB,MAAM,GAAG,MAAM,OAAO,IAAI,GAAG;QAC7B,MAAM,OAAO,IAAI,KAAK,SAAS,OAAO,SAAS,SAAS,GAAG,SAAS;QACpE,IAAI,CAAC,MAAM,KAAK,OAAO,KAAK;YAC1B,OAAO,GAAG,IAAI,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,MAAM,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,MAAM;QACpE;IACF;IAEA,wBAAwB;IACxB,MAAM,gBAAgB,IAAI,KAAK,CAAC;IAChC,IAAI,eAAe;QACjB,MAAM,GAAG,OAAO,KAAK,KAAK,GAAG;QAC7B,MAAM,OAAO,IAAI,KAAK,SAAS,OAAO,SAAS,SAAS,GAAG,SAAS;QACpE,IAAI,CAAC,MAAM,KAAK,OAAO,KAAK;YAC1B,OAAO,GAAG,IAAI,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,MAAM,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,MAAM;QACpE;IACF;IAEA,0BAA0B;IAC1B,MAAM,UAAU,IAAI,KAAK;IACzB,IAAI,CAAC,MAAM,QAAQ,OAAO,KAAK;QAC7B,OAAO,QAAQ,kBAAkB,CAAC,SAAS,KAAK,CAAC,KAAK,OAAO,GAAG,IAAI,CAAC,KAAK,OAAO,CAAC,MAAM,KAAK,KAAK,CAAC,KAAK,OAAO,GAAG,IAAI,CAAC;IACzH;IAEA,OAAO;AACT;AAEA,wBAAwB;AACxB,SAAS,SAAS,IAAY;IAC5B,MAAM,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC;IAChC,IAAI,MAAM,MAAM,KAAK,GAAG,OAAO,EAAE;IAEjC,eAAe;IACf,MAAM,UAAU,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI;IACrD,MAAM,OAAc,EAAE;IAEtB,sBAAsB;IACtB,MAAM,iBAAiB,QAAQ,SAAS,CAAC,CAAC,IACxC,EAAE,WAAW,GAAG,QAAQ,CAAC,WAAW,EAAE,WAAW,GAAG,QAAQ,CAAC;IAE/D,MAAM,UAAU,QAAQ,SAAS,CAAC,CAAC,IAAM,EAAE,WAAW,GAAG,QAAQ,CAAC;IAClE,MAAM,UAAU,QAAQ,SAAS,CAAC,CAAC,IAAM,EAAE,WAAW,GAAG,QAAQ,CAAC;IAClE,MAAM,YAAY,QAAQ,SAAS,CAAC,CAAC,IAAM,EAAE,WAAW,GAAG,QAAQ,CAAC;IAEpE,aAAa;IACb,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;QACrC,MAAM,SAAS,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI;QACpD,IAAI,OAAO,MAAM,GAAG,KAAK,GAAG,CAAC,gBAAgB,SAAS,SAAS,YAAY;YACzE,KAAK,IAAI,CAAC;gBACR,aAAa,MAAM,CAAC,eAAe,IAAI;gBACvC,MAAM,MAAM,CAAC,QAAQ,IAAI;gBACzB,MAAM,CAAC,MAAM,CAAC,QAAQ,IAAI,EAAE,EAAE,WAAW;gBACzC,QAAQ,WAAW,MAAM,CAAC,UAAU,KAAK;YAC3C;QACF;IACF;IAEA,OAAO;AACT;AAEe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,eAAe,IAAA,+MAAM,EAAmB;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAqB,EAAE;IACrE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,MAAM,mBAAmB,CAAC;QACxB,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QACpC,IAAI,CAAC,MAAM;QAEX,YAAY,KAAK,IAAI;QACrB,MAAM,SAAS,IAAI;QAEnB,OAAO,MAAM,GAAG,CAAC;YACf,IAAI;gBACF,IAAI,WAAkB,EAAE;gBAExB,IAAI,KAAK,IAAI,CAAC,QAAQ,CAAC,SAAS;oBAC9B,YAAY;oBACZ,MAAM,OAAO,EAAE,MAAM,EAAE;oBACvB,WAAW,SAAS;gBACtB,OAAO;oBACL,cAAc;oBACd,MAAM,OAAO,EAAE,MAAM,EAAE;oBACvB,MAAM,WAAW,qIAAS,CAAC,MAAM;wBAAE,MAAM;oBAAQ;oBACjD,MAAM,YAAY,SAAS,MAAM,CAAC,SAAS,UAAU,CAAC,EAAE,CAAC;oBACzD,WAAW,sIAAU,CAAC,aAAa,CAAC;gBACtC;gBAEA,8BAA8B;gBAC9B,MAAM,eAAmC,SACtC,GAAG,CAAC,CAAC;oBACJ,MAAM,aAAa,UAAU,GAAG,CAAC,OAAO,IAAI,GAAG,CAAC,OAAO,IAAI;oBAC3D,OAAO;wBACL,aAAa,OACX,GAAG,CAAC,eAAe,IAAI,GAAG,CAAC,OAAO,IAAI,GAAG,CAAC,cAAc,IAAI,GAAG,CAAC,cAAc,IAAI,IAClF,IAAI;wBACN,MAAM,cAAc;wBACpB,MAAM,OAAO,GAAG,CAAC,OAAO,IAAI,GAAG,CAAC,OAAO,IAAI,IAAI,WAAW,GAAG,IAAI;wBACjE,QAAQ,WAAW,GAAG,CAAC,SAAS,IAAI,GAAG,CAAC,SAAS,IAAI;oBACvD;gBACF,GACC,MAAM,CAAC,CAAC;oBACP,4BAA4B;oBAC5B,IAAI,CAAC,EAAE,WAAW,EAAE;wBAClB,OAAO;oBACT;oBACA,IAAI,CAAC,EAAE,IAAI,EAAE;wBACX,iJAAK,CAAC,OAAO,CAAC,CAAC,aAAa,EAAE,EAAE,WAAW,CAAC,0BAA0B,CAAC;wBACvE,OAAO;oBACT;oBACA,IAAI,CAAC;wBAAC;wBAAW;wBAAc;qBAAW,CAAC,QAAQ,CAAC,EAAE,IAAI,GAAG;wBAC3D,iJAAK,CAAC,OAAO,CACX,CAAC,aAAa,EAAE,EAAE,WAAW,CAAC,gEAAgE,CAAC;wBAEjG,OAAO;oBACT;oBACA,IAAI,MAAM,EAAE,MAAM,KAAK,EAAE,MAAM,IAAI,GAAG;wBACpC,iJAAK,CAAC,OAAO,CAAC,CAAC,aAAa,EAAE,EAAE,WAAW,CAAC,iBAAiB,CAAC;wBAC9D,OAAO;oBACT;oBACA,OAAO;gBACT;gBAEF,IAAI,aAAa,MAAM,KAAK,GAAG;oBAC7B,iJAAK,CAAC,KAAK,CAAC;oBACZ,eAAe,EAAE;oBACjB,YAAY;oBACZ;gBACF;gBAEA,eAAe;gBACf,iJAAK,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,aAAa,MAAM,CAAC,aAAa,CAAC;YAC9D,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,uBAAuB;gBACrC,iJAAK,CAAC,KAAK,CAAC;gBACZ,YAAY;gBACZ,eAAe,EAAE;YACnB;QACF;QAEA,IAAI,KAAK,IAAI,CAAC,QAAQ,CAAC,SAAS;YAC9B,OAAO,UAAU,CAAC;QACpB,OAAO;YACL,OAAO,iBAAiB,CAAC;QAC3B;IACF;IAEA,MAAM,eAAe;QACnB,IAAI,YAAY,MAAM,KAAK,GAAG;YAC5B,iJAAK,CAAC,KAAK,CAAC;YACZ;QACF;QAEA,aAAa;QACb,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,kCAAkC;gBAC7D,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,cAAc;gBAAY;YACnD;YAEA,MAAM,SAAS,MAAM,SAAS,IAAI;YAElC,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,iJAAK,CAAC,KAAK,CAAC,OAAO,KAAK,IAAI;gBAC5B;YACF;YAEA,iJAAK,CAAC,OAAO,CACX,CAAC,wBAAwB,EAAE,OAAO,YAAY,CAAC,eAAe,EAC5D,OAAO,YAAY,GAAG,IAAI,GAAG,OAAO,YAAY,CAAC,QAAQ,CAAC,GAAG,IAC7D;YAEJ,eAAe,EAAE;YACjB,YAAY;YACZ,IAAI,aAAa,OAAO,EAAE;gBACxB,aAAa,OAAO,CAAC,KAAK,GAAG;YAC/B;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,iJAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS,IAAM,OAAO,IAAI;4BAC1B,WAAU;sCAEV,cAAA,8OAAC,6NAAS;gCAAC,WAAU;;;;;;;;;;;sCAEvB,8OAAC;4BAAG,WAAU;sCAAoC;;;;;;;;;;;;8BAGpD,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAA4C;;;;;;8CAE1D,8OAAC;oCACC,WAAU;oCACV,SAAS,IAAM,aAAa,OAAO,EAAE;;sDAErC,8OAAC,gNAAM;4CAAC,WAAU;;;;;;sDAClB,8OAAC;4CAAE,WAAU;sDAAoC;;;;;;sDACjD,8OAAC;4CAAE,WAAU;sDAAyB;;;;;;wCAGrC,0BACC,8OAAC;4CAAE,WAAU;;gDAA0C;gDAC1C;;;;;;;sDAGf,8OAAC;4CACC,KAAK;4CACL,MAAK;4CACL,QAAO;4CACP,UAAU;4CACV,WAAU;;;;;;;;;;;;8CAId,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAG,WAAU;sDAA4C;;;;;;sDAC1D,8OAAC;4CAAG,WAAU;;8DACZ,8OAAC;;wDAAG;sEAAE,8OAAC;sEAAO;;;;;;wDAAsB;;;;;;;8DACpC,8OAAC;;wDAAG;sEAAE,8OAAC;sEAAO;;;;;;wDAAc;;;;;;;8DAC5B,8OAAC;;wDAAG;sEAAE,8OAAC;sEAAO;;;;;;wDAAc;;;;;;;8DAC5B,8OAAC;;wDAAG;sEAAE,8OAAC;sEAAO;;;;;;wDAAgB;;;;;;;;;;;;;;;;;;;8CAIlC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAG,WAAU;sDAA4C;;;;;;sDAC1D,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;;sEACC,8OAAC;4DAAE,WAAU;sEAA0C;;;;;;sEACvD,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;oEACC,MAAK;oEACL,QAAQ;oEACR,WAAU;8EACX;;;;;;8EAGD,8OAAC;oEACC,MAAK;oEACL,QAAQ;oEACR,WAAU;8EACX;;;;;;;;;;;;;;;;;;8DAKL,8OAAC;;sEACC,8OAAC;4DAAE,WAAU;sEAA0C;;;;;;sEACvD,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;oEACC,MAAK;oEACL,QAAQ;oEACR,WAAU;8EACX;;;;;;8EAGD,8OAAC;oEACC,MAAK;oEACL,QAAQ;oEACR,WAAU;8EACX;;;;;;;;;;;;;;;;;;8DAKL,8OAAC;;sEACC,8OAAC;4DAAE,WAAU;sEAA0C;;;;;;sEACvD,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;oEACC,MAAK;oEACL,QAAQ;oEACR,WAAU;8EACX;;;;;;8EAGD,8OAAC;oEACC,MAAK;oEACL,QAAQ;oEACR,WAAU;8EACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gCAQR,YAAY,MAAM,GAAG,mBACpB,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCACC,SAAS;wCACT,UAAU;wCACV,WAAU;kDAET,0BACC;;8DACE,8OAAC,gNAAM;oDAAC,WAAU;;;;;;gDAAyB;;yEAI7C;;8DACE,8OAAC,gNAAM;oDAAC,WAAU;;;;;;gDAAY;gDACtB,YAAY,MAAM;gDAAC;;;;;;;;;;;;;;;;;;;sCASvC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAA4C;;;;;;gCAEzD,YAAY,MAAM,GAAG,kBACpB,8OAAC;oCAAI,WAAU;8CACZ,YAAY,GAAG,CAAC,CAAC,aAAa,oBAC7B,8OAAC;4CAAc,WAAU;;8DACvB,8OAAC;oDAAE,WAAU;8DACV,YAAY,WAAW;;;;;;8DAE1B,8OAAC;oDAAE,WAAU;8DAAwC,YAAY,IAAI;;;;;;8DACrE,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DACC,WAAW,CAAC,iDAAiD,EAC3D,YAAY,IAAI,KAAK,YACjB,gCACA,2BACJ;sEAED,YAAY,IAAI;;;;;;sEAEnB,8OAAC;4DAAK,WAAU;;gEAAmC;gEAC/C,YAAY,MAAM,CAAC,OAAO,CAAC;;;;;;;;;;;;;;2CAhBzB;;;;;;;;;yDAuBd,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAE,WAAU;sDAAiB;;;;;;sDAC9B,8OAAC;4CAAE,WAAU;sDAA8B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAU3D"}}]
}