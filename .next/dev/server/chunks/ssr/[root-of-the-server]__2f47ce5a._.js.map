{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/pusher.ts"],"sourcesContent":["import Pusher from 'pusher';\nimport PusherJs from 'pusher-js';\n\n// Server-side Pusher instance\nexport const pusher = new Pusher({\n  appId: process.env.NEXT_PUBLIC_PUSHER_APP_ID || '',\n  key: process.env.NEXT_PUBLIC_PUSHER_KEY || '',\n  secret: process.env.PUSHER_SECRET || '',\n  cluster: process.env.NEXT_PUBLIC_PUSHER_CLUSTER || 'mt1',\n  useTLS: true,\n});\n\n// Client-side Pusher instance\nexport const getPusherClient = () => {\n  if (typeof window === 'undefined') return null;\n  \n  const pusherClient = new PusherJs(\n    process.env.NEXT_PUBLIC_PUSHER_KEY || '',\n    {\n      cluster: process.env.NEXT_PUBLIC_PUSHER_CLUSTER || 'mt1',\n      forceTLS: true,\n    }\n  );\n  \n  return pusherClient;\n};\n\n// Channel names\nexport const CHANNELS = {\n  STUDENTS: 'students',\n  BALANCE_UPDATE: (studentId: string) => `balance-${studentId}`,\n  ADMIN: 'admin-channel',\n};\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAGO,MAAM,SAAS,IAAI,kJAAM,CAAC;IAC/B,OAAO,+CAAyC;IAChD,KAAK,4DAAsC;IAC3C,QAAQ,QAAQ,GAAG,CAAC,aAAa,IAAI;IACrC,SAAS,2CAA0C;IACnD,QAAQ;AACV;AAGO,MAAM,kBAAkB;IAC7B,wCAAmC,OAAO;;;IAE1C,MAAM;AASR;AAGO,MAAM,WAAW;IACtB,UAAU;IACV,gBAAgB,CAAC,YAAsB,CAAC,QAAQ,EAAE,WAAW;IAC7D,OAAO;AACT"}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/hooks/usePusher.ts"],"sourcesContent":["import { useEffect, useCallback } from 'react';\nimport { getPusherClient, CHANNELS } from '@/lib/pusher';\n\nexport function usePusherUpdates(studentId?: string, onUpdate?: (data: any) => void) {\n  useEffect(() => {\n    const pusher = getPusherClient();\n    if (!pusher) return;\n\n    if (studentId) {\n      // Subscribe to balance updates for specific student\n      const channel = pusher.subscribe(CHANNELS.BALANCE_UPDATE(studentId));\n\n      channel.bind('balance-changed', (data: any) => {\n        if (onUpdate) onUpdate({ type: 'balance-changed', ...data });\n      });\n\n      channel.bind('transaction-added', (data: any) => {\n        if (onUpdate) onUpdate({ type: 'transaction-added', ...data });\n      });\n\n      return () => {\n        channel.unbind_all();\n        pusher.unsubscribe(CHANNELS.BALANCE_UPDATE(studentId));\n      };\n    }\n  }, [studentId, onUpdate]);\n}\n\nexport function usePusherAdminUpdates(onUpdate?: (data: any) => void) {\n  useEffect(() => {\n    const pusher = getPusherClient();\n    if (!pusher) return;\n\n    const channel = pusher.subscribe(CHANNELS.STUDENTS);\n\n    channel.bind('list-updated', (data: any) => {\n      if (onUpdate) onUpdate({ type: 'list-updated', ...data });\n    });\n\n    return () => {\n      channel.unbind_all();\n      pusher.unsubscribe(CHANNELS.STUDENTS);\n    };\n  }, [onUpdate]);\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAAS,iBAAiB,SAAkB,EAAE,QAA8B;IACjF,IAAA,kNAAS,EAAC;QACR,MAAM,SAAS,IAAA,gIAAe;QAC9B,IAAI,CAAC,QAAQ;QAEb,IAAI,WAAW;YACb,oDAAoD;YACpD,MAAM,UAAU,OAAO,SAAS,CAAC,yHAAQ,CAAC,cAAc,CAAC;YAEzD,QAAQ,IAAI,CAAC,mBAAmB,CAAC;gBAC/B,IAAI,UAAU,SAAS;oBAAE,MAAM;oBAAmB,GAAG,IAAI;gBAAC;YAC5D;YAEA,QAAQ,IAAI,CAAC,qBAAqB,CAAC;gBACjC,IAAI,UAAU,SAAS;oBAAE,MAAM;oBAAqB,GAAG,IAAI;gBAAC;YAC9D;YAEA,OAAO;gBACL,QAAQ,UAAU;gBAClB,OAAO,WAAW,CAAC,yHAAQ,CAAC,cAAc,CAAC;YAC7C;QACF;IACF,GAAG;QAAC;QAAW;KAAS;AAC1B;AAEO,SAAS,sBAAsB,QAA8B;IAClE,IAAA,kNAAS,EAAC;QACR,MAAM,SAAS,IAAA,gIAAe;QAC9B,IAAI,CAAC,QAAQ;QAEb,MAAM,UAAU,OAAO,SAAS,CAAC,yHAAQ,CAAC,QAAQ;QAElD,QAAQ,IAAI,CAAC,gBAAgB,CAAC;YAC5B,IAAI,UAAU,SAAS;gBAAE,MAAM;gBAAgB,GAAG,IAAI;YAAC;QACzD;QAEA,OAAO;YACL,QAAQ,UAAU;YAClB,OAAO,WAAW,CAAC,yHAAQ,CAAC,QAAQ;QACtC;IACF,GAAG;QAAC;KAAS;AACf"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/user/dashboard/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { Wallet, User, ArrowUpRight, ArrowDownRight, History, QrCode, Download, Printer, Zap } from \"lucide-react\"\nimport { useTheme } from \"next-themes\"\nimport { QRCodeSVG } from \"qrcode.react\"\nimport jsPDF from \"jspdf\"\nimport * as XLSX from \"xlsx\"\nimport { usePusherUpdates } from \"@/lib/hooks/usePusher\"\n\nexport default function UserDashboard() {\n  const router = useRouter()\n  const { theme, setTheme } = useTheme()\n  const [isLoading, setIsLoading] = useState(true)\n  const [userData, setUserData] = useState<any>(null)\n  const [realTimeStatus, setRealTimeStatus] = useState(false)\n  const [selectedAcademicYear, setSelectedAcademicYear] = useState(\"2024-25\")\n\n  const loadUserData = async () => {\n    try {\n      // Verify session from MongoDB\n      const verifyRes = await fetch('/api/auth/verify')\n      if (!verifyRes.ok) {\n        router.push(\"/login\")\n        return\n      }\n      \n      const session = await verifyRes.json()\n      const studentId = session.userData.id\n\n      const res = await fetch(`/api/students/${studentId}`, {\n        method: 'GET',\n        cache: 'no-store',\n        headers: {\n          'Cache-Control': 'no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0'\n        }\n      })\n      \n      if (!res.ok) {\n        console.error(\"Failed to fetch student:\", res.status)\n        return\n      }\n      \n      const student = await res.json()\n      if (!student) {\n        console.error(\"Student data is null\")\n        return\n      }\n      setUserData({\n        id: student._id,\n        name: student.name || \"User\",\n        code: student.code || \"NA-0000\",\n        balance: student.balance || 0,\n        profileImage: student.profileImage || null,\n        transactions: student.transactions || [],\n      })\n    } catch (error) {\n      console.error(\"Error loading user data:\", error)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    loadUserData()\n  }, [])\n\n  // Auto-logout when user refreshes or navigates away\n  useEffect(() => {\n    const handleBeforeUnload = () => {\n      fetch('/api/auth/logout', { method: 'POST', keepalive: true })\n    }\n\n    window.addEventListener('beforeunload', handleBeforeUnload)\n    return () => window.removeEventListener('beforeunload', handleBeforeUnload)\n  }, [])\n\n  // Refresh data every 5 seconds (slower polling to prevent lag)\n  useEffect(() => {\n    const interval = setInterval(() => {\n      loadUserData()\n    }, 5000)\n\n    return () => clearInterval(interval)\n  }, [isLoading])\n\n  // Use Pusher for real-time updates\n  usePusherUpdates(userData?.id, (data) => {\n    if (data.type === 'balance-changed' || data.type === 'transaction-added') {\n      setRealTimeStatus(true)\n      loadUserData()\n      setTimeout(() => setRealTimeStatus(false), 2000)\n    }\n  })\n\n\n  const downloadPDF = () => {\n    const doc = new jsPDF()\n    const pageHeight = doc.internal.pageSize.getHeight()\n    const pageWidth = doc.internal.pageSize.getWidth()\n    const margin = 10\n    let yPosition = 20\n\n    // Title\n    doc.setFontSize(18)\n    doc.text('Student Account Details', margin, yPosition)\n    yPosition += 12\n\n    // User Info\n    doc.setFontSize(11)\n    doc.text(`Name: ${userData?.name || 'N/A'}`, margin, yPosition)\n    yPosition += 8\n    doc.text(`Code: ${userData?.code || 'N/A'}`, margin, yPosition)\n    yPosition += 8\n    doc.text(`Balance: ₹${(userData?.balance || 0).toFixed(2)}`, margin, yPosition)\n    yPosition += 12\n\n    // Transactions Table\n    doc.setFontSize(12)\n    doc.text('Transaction History', margin, yPosition)\n    yPosition += 8\n\n    const columns = ['S.No', 'Date', 'Deposit', 'Withdraw', 'Balance']\n    const rows: any[] = []\n    let runningBalance = 0\n\n    userData?.transactions?.forEach((t: any, idx: number) => {\n      if (t.type === 'deposit') {\n        runningBalance += t.amount || 0\n      } else {\n        runningBalance -= t.amount || 0\n      }\n      rows.push([\n        (idx + 1).toString(),\n        t.date || '-',\n        t.type === 'deposit' ? `₹${t.amount?.toFixed(2)}` : '-',\n        t.type === 'withdraw' ? `₹${t.amount?.toFixed(2)}` : '-',\n        `₹${runningBalance.toFixed(2)}`\n      ])\n    })\n\n    doc.setFontSize(9)\n    let colWidth = (pageWidth - 2 * margin) / columns.length\n    \n    columns.forEach((col, idx) => {\n      doc.text(col, margin + idx * colWidth, yPosition)\n    })\n    yPosition += 6\n\n    rows.forEach(row => {\n      if (yPosition + 6 > pageHeight - margin) {\n        doc.addPage()\n        yPosition = margin\n      }\n      row.forEach((cell: string, idx: number) => {\n        doc.text(cell.substring(0, 10), margin + idx * colWidth, yPosition)\n      })\n      yPosition += 6\n    })\n\n    doc.save(`${userData?.name}_account_${new Date().toISOString().split('T')[0]}.pdf`)\n  }\n\n  const downloadExcel = () => {\n    const data: any[] = [\n      ['Account Details'],\n      ['Name', userData?.name || 'N/A'],\n      ['Code', userData?.code || 'N/A'],\n      ['Balance', `₹${(userData?.balance || 0).toFixed(2)}`],\n      [],\n      ['Transaction History'],\n    ]\n\n    let runningBalance = 0\n    data.push(['S.No', 'Date', 'Deposit', 'Withdraw', 'Balance'])\n\n    userData?.transactions?.forEach((t: any, idx: number) => {\n      if (t.type === 'deposit') {\n        runningBalance += t.amount || 0\n      } else {\n        runningBalance -= t.amount || 0\n      }\n      data.push([\n        idx + 1,\n        t.date || '-',\n        t.type === 'deposit' ? `₹${t.amount?.toFixed(2)}` : '-',\n        t.type === 'withdraw' ? `₹${t.amount?.toFixed(2)}` : '-',\n        `₹${runningBalance.toFixed(2)}`\n      ])\n    })\n\n    const ws = XLSX.utils.aoa_to_sheet(data)\n    const wb = XLSX.utils.book_new()\n    XLSX.utils.book_append_sheet(wb, ws, 'Account')\n    XLSX.writeFile(wb, `${userData?.name}_account_${new Date().toISOString().split('T')[0]}.xlsx`)\n  }\n\n  const handlePrint = () => {\n    window.print()\n  }\n\n  const calculateYearlyBalance = () => {\n    if (!userData || !userData.transactions) return 0\n    \n    // Default session if not set is 2024-25\n    const sessionToFilter = selectedAcademicYear;\n    \n    const filtered = userData.transactions.filter((t: any) => {\n      const txYear = t.academicYear || '2024-25';\n      return txYear === sessionToFilter;\n    });\n\n    return filtered.reduce((sum: number, t: any) => {\n      return t.type === 'deposit' ? sum + (t.amount || 0) : sum - (t.amount || 0)\n    }, 0)\n  }\n\n  if (isLoading || !userData) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-[#f8f9fa] to-[#e8eef5] flex items-center justify-center p-4\">\n        <div className=\"text-center\">\n          <div className=\"inline-block\">\n            <div className=\"w-12 h-12 border-4 border-[#e5e7eb] border-t-[#4a6670] rounded-full animate-spin\"></div>\n          </div>\n          <p className=\"mt-4 text-[#747384]\">Loading your profile...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-[#f8f9fa] to-[#e8eef5] p-4\">\n      <div className=\"max-w-md mx-auto\">\n\n        {/* Profile Card */}\n        <div className=\"bg-white rounded-2xl shadow-lg p-6 mb-6\">\n          {/* Avatar and Name */}\n          <div className=\"flex flex-col items-center mb-6\">\n            {userData?.profileImage ? (\n              <img src={userData.profileImage} alt={userData?.name} className=\"w-20 h-20 rounded-full object-cover mb-4 shadow-md\" />\n            ) : (\n              <div className=\"w-20 h-20 bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-full flex items-center justify-center text-white font-bold text-3xl mb-4\">\n                {userData?.name?.charAt(0).toUpperCase() || 'U'}\n              </div>\n            )}\n            <h2 className=\"text-2xl font-bold text-[#171532] text-center\">{userData?.name || 'User'}</h2>\n            <p className=\"text-sm text-[#747384]\">Code: {userData?.code || 'NA-0000'}</p>\n          </div>\n\n          {/* Balance Card */}\n          <div className=\"bg-gradient-to-br from-[#4a6670] to-[#3d565e] rounded-xl p-5 mb-6 shadow-md\">\n            <div className=\"flex items-center gap-3 mb-3\">\n              <div className=\"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center\">\n                <Wallet className=\"w-5 h-5 text-white\" />\n              </div>\n              <p className=\"text-white/70 text-sm font-medium\">Total Balance ({selectedAcademicYear})</p>\n          </div>\n          <div className=\"bg-white/10 rounded-lg p-3 mb-4\">\n            <label className=\"block text-white/70 text-xs font-medium mb-1\">Academic Session</label>\n            <div className=\"flex items-center gap-2\">\n              <History className=\"w-3.5 h-3.5 text-white/60\" />\n              <select \n                value={selectedAcademicYear}\n                onChange={(e) => setSelectedAcademicYear(e.target.value)}\n                className=\"flex-1 bg-transparent border-none text-white text-sm rounded-md focus:ring-0 cursor-pointer p-0 font-bold\"\n              >\n                <option value=\"2023-24\" className=\"text-gray-900\">2023-24 Session</option>\n                <option value=\"2024-25\" className=\"text-gray-900\">2024-25 Session</option>\n                <option value=\"2025-26\" className=\"text-gray-900\">2025-26 Session</option>\n              </select>\n            </div>\n          </div>\n          <p className=\"text-3xl font-bold text-white\">₹{calculateYearlyBalance().toFixed(2)}</p>\n        </div>\n\n          {/* Profile Info and QR Code Section */}\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center gap-3 p-3 bg-[#f8f9fa] rounded-lg\">\n              <User className=\"w-5 h-5 text-[#4a6670]\" />\n              <div>\n                <p className=\"text-xs text-[#747384]\">Full Name</p>\n                <p className=\"font-semibold text-[#171532]\">{userData?.name || 'User'}</p>\n              </div>\n            </div>\n\n            {/* QR Code Section */}\n            <div className=\"bg-[#f8f9fa] rounded-lg p-4 flex flex-col items-center\">\n              <div className=\"flex items-center gap-2 mb-3 w-full\">\n                <QrCode className=\"w-4 h-4 text-[#4a6670]\" />\n                <p className=\"text-xs text-[#747384] font-medium\">QR Code</p>\n              </div>\n              <div className=\"bg-white p-2 rounded border border-[#e5e7eb]\">\n                <QRCodeSVG value={userData?.code || 'NA-0000'} size={120} level=\"H\" includeMargin={true} />\n              </div>\n              <p className=\"text-xs text-[#747384] mt-2 text-center\">Scan to verify account</p>\n            </div>\n          </div>\n\n          {/* Print and Export Buttons */}\n          <div className=\"mt-6 grid grid-cols-3 gap-2\">\n            <button\n              onClick={handlePrint}\n              className=\"flex items-center justify-center gap-2 bg-[#4a6670] hover:bg-[#3d565e] text-white px-3 py-2 rounded-lg font-semibold text-xs transition-colors\"\n              title=\"Print Dashboard\"\n            >\n              <Printer className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline\">Print</span>\n            </button>\n            <button\n              onClick={downloadPDF}\n              className=\"flex items-center justify-center gap-2 bg-[#EF4444] hover:bg-[#dc2626] text-white px-3 py-2 rounded-lg font-semibold text-xs transition-colors\"\n              title=\"Download PDF\"\n            >\n              <Download className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline\">PDF</span>\n            </button>\n            <button\n              onClick={downloadExcel}\n              className=\"flex items-center justify-center gap-2 bg-[#10B981] hover:bg-[#0fa06f] text-white px-3 py-2 rounded-lg font-semibold text-xs transition-colors\"\n              title=\"Download Excel\"\n            >\n              <Download className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline\">Excel</span>\n            </button>\n          </div>\n\n          {/* Real-Time Status Indicator */}\n          {realTimeStatus && (\n            <div className=\"mt-4 flex items-center gap-2 p-2 bg-green-50 border border-green-200 rounded-lg\">\n              <Zap className=\"w-4 h-4 text-green-600 animate-pulse\" />\n              <p className=\"text-xs text-green-700 font-medium\">Real-time update received</p>\n            </div>\n          )}\n\n          {/* Transactions Table Section */}\n          {userData?.transactions && userData.transactions.length > 0 && (\n            <div className=\"mt-6 pt-6 border-t border-[#e5e7eb]\">\n              <div className=\"flex items-center gap-2 mb-4\">\n                <History className=\"w-5 h-5 text-[#4a6670]\" />\n                <h3 className=\"font-semibold text-[#171532]\">Transaction Ledger</h3>\n              </div>\n              <div className=\"overflow-x-auto max-h-80 overflow-y-auto\">\n                <table className=\"w-full text-sm border-collapse\">\n                  <thead>\n                    <tr className=\"bg-[#4a6670] text-white sticky top-0\">\n                      <th className=\"border border-[#3d565e] px-2 py-2 text-left font-semibold\">S.No</th>\n                      <th className=\"border border-[#3d565e] px-2 py-2 text-left font-semibold\">Date</th>\n                      <th className=\"border border-[#3d565e] px-2 py-2 text-right font-semibold\">Deposit</th>\n                      <th className=\"border border-[#3d565e] px-2 py-2 text-right font-semibold\">Withdraw</th>\n                      <th className=\"border border-[#3d565e] px-2 py-2 text-right font-semibold\">Balance</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {userData.transactions\n                      .filter((t: any) => (t.academicYear || '2024-25') === selectedAcademicYear)\n                      .map((transaction: any, idx: number) => {\n                      // Calculate running balance for filtered transactions\n                      let runningBalance = 0\n                      const filteredTxs = userData.transactions.filter((t: any) => (t.academicYear || '2024-25') === selectedAcademicYear)\n                      for (let i = 0; i <= idx; i++) {\n                        if (filteredTxs[i].type === 'deposit') {\n                          runningBalance += filteredTxs[i].amount || 0\n                        } else {\n                          runningBalance -= filteredTxs[i].amount || 0\n                        }\n                      }\n                      \n                      return (\n                        <tr key={idx} className={idx % 2 === 0 ? 'bg-[#f8f9fa]' : 'bg-white'}>\n                          <td className=\"border border-[#e5e7eb] px-2 py-2 font-semibold text-[#171532]\">\n                            <div className=\"flex flex-col gap-1\">\n                              <span>{idx + 1}</span>\n                              <span className=\"text-[9px] bg-[#4a6670]/10 text-[#4a6670] px-1 py-0.5 rounded font-medium w-fit\">\n                                {transaction.academicYear || '2024-25'}\n                              </span>\n                            </div>\n                          </td>\n                          <td className=\"border border-[#e5e7eb] px-2 py-2 text-[#747384] text-xs\">{transaction.date || '-'}</td>\n                          <td className=\"border border-[#e5e7eb] px-2 py-2 text-right\">\n                            {transaction.type === 'deposit' ? (\n                              <span className=\"inline-flex items-center gap-1 bg-green-50 px-2 py-1 rounded font-semibold text-green-700\">\n                                <span>↓</span>₹{transaction.amount?.toFixed(2)}\n                              </span>\n                            ) : (\n                              <span className=\"text-[#747384]\">-</span>\n                            )}\n                          </td>\n                          <td className=\"border border-[#e5e7eb] px-2 py-2 text-right\">\n                            {transaction.type === 'withdraw' ? (\n                              <span className=\"inline-flex items-center gap-1 bg-red-50 px-2 py-1 rounded font-semibold text-red-700\">\n                                <span>↑</span>₹{transaction.amount?.toFixed(2)}\n                              </span>\n                            ) : (\n                              <span className=\"text-[#747384]\">-</span>\n                            )}\n                          </td>\n                          <td className=\"border border-[#e5e7eb] px-2 py-2 text-right font-bold text-[#4a6670]\">\n                            ₹{runningBalance.toFixed(2)}\n                          </td>\n                        </tr>\n                      )\n                    })}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n        </div>\n\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}