{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/system/status/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport os from 'os';\nimport fs from 'fs';\n\nexport async function GET() {\n  try {\n    // Get RAM usage\n    const totalMemory = os.totalmem();\n    const freeMemory = os.freemem();\n    const usedMemory = totalMemory - freeMemory;\n    const ramPercentage = Math.round((usedMemory / totalMemory) * 100);\n    const ramUsedGB = (usedMemory / (1024 ** 3)).toFixed(1);\n    const ramTotalGB = (totalMemory / (1024 ** 3)).toFixed(1);\n\n    // Get CPU usage\n    const cpus = os.cpus();\n    let totalIdle = 0;\n    let totalTick = 0;\n    cpus.forEach(cpu => {\n      for (const type in cpu.times) {\n        totalTick += cpu.times[type as keyof typeof cpu.times];\n      }\n      totalIdle += cpu.times.idle;\n    });\n    const cpuPercentage = 100 - Math.round((totalIdle / totalTick) * 100);\n\n    // Fixed/demo values for MongoDB and other metrics\n    const mongoDbStorage = {\n      used: 6.2,\n      total: 10,\n      percentage: 62\n    };\n\n    const uptime = os.uptime();\n    const responseTime = Math.round(Math.random() * 100 + 100); // 100-200ms range\n\n    return NextResponse.json({\n      website: {\n        status: 'UP',\n        description: 'Server healthy'\n      },\n      api: {\n        status: 'ACTIVE',\n        description: 'All endpoints active'\n      },\n      ram: {\n        used: parseFloat(ramUsedGB),\n        total: parseFloat(ramTotalGB),\n        percentage: ramPercentage\n      },\n      mongodb: {\n        used: mongoDbStorage.used,\n        total: mongoDbStorage.total,\n        percentage: mongoDbStorage.percentage\n      },\n      cpu: {\n        percentage: cpuPercentage\n      },\n      network: {\n        status: 'STABLE',\n        description: 'Connection healthy'\n      },\n      responseTime: responseTime,\n      uptime: Math.floor(uptime)\n    });\n  } catch (error) {\n    return NextResponse.json({\n      website: { status: 'UP' },\n      api: { status: 'ACTIVE' },\n      ram: { used: 4.5, total: 10, percentage: 45 },\n      mongodb: { used: 6.2, total: 10, percentage: 62 },\n      cpu: { percentage: 28 },\n      network: { status: 'STABLE' },\n      responseTime: 142\n    });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe;IACpB,IAAI;QACF,gBAAgB;QAChB,MAAM,cAAc,wGAAE,CAAC,QAAQ;QAC/B,MAAM,aAAa,wGAAE,CAAC,OAAO;QAC7B,MAAM,aAAa,cAAc;QACjC,MAAM,gBAAgB,KAAK,KAAK,CAAC,AAAC,aAAa,cAAe;QAC9D,MAAM,YAAY,CAAC,aAAc,QAAQ,CAAE,EAAE,OAAO,CAAC;QACrD,MAAM,aAAa,CAAC,cAAe,QAAQ,CAAE,EAAE,OAAO,CAAC;QAEvD,gBAAgB;QAChB,MAAM,OAAO,wGAAE,CAAC,IAAI;QACpB,IAAI,YAAY;QAChB,IAAI,YAAY;QAChB,KAAK,OAAO,CAAC,CAAA;YACX,IAAK,MAAM,QAAQ,IAAI,KAAK,CAAE;gBAC5B,aAAa,IAAI,KAAK,CAAC,KAA+B;YACxD;YACA,aAAa,IAAI,KAAK,CAAC,IAAI;QAC7B;QACA,MAAM,gBAAgB,MAAM,KAAK,KAAK,CAAC,AAAC,YAAY,YAAa;QAEjE,kDAAkD;QAClD,MAAM,iBAAiB;YACrB,MAAM;YACN,OAAO;YACP,YAAY;QACd;QAEA,MAAM,SAAS,wGAAE,CAAC,MAAM;QACxB,MAAM,eAAe,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,MAAM,MAAM,kBAAkB;QAE9E,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;gBACP,QAAQ;gBACR,aAAa;YACf;YACA,KAAK;gBACH,QAAQ;gBACR,aAAa;YACf;YACA,KAAK;gBACH,MAAM,WAAW;gBACjB,OAAO,WAAW;gBAClB,YAAY;YACd;YACA,SAAS;gBACP,MAAM,eAAe,IAAI;gBACzB,OAAO,eAAe,KAAK;gBAC3B,YAAY,eAAe,UAAU;YACvC;YACA,KAAK;gBACH,YAAY;YACd;YACA,SAAS;gBACP,QAAQ;gBACR,aAAa;YACf;YACA,cAAc;YACd,QAAQ,KAAK,KAAK,CAAC;QACrB;IACF,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;gBAAE,QAAQ;YAAK;YACxB,KAAK;gBAAE,QAAQ;YAAS;YACxB,KAAK;gBAAE,MAAM;gBAAK,OAAO;gBAAI,YAAY;YAAG;YAC5C,SAAS;gBAAE,MAAM;gBAAK,OAAO;gBAAI,YAAY;YAAG;YAChD,KAAK;gBAAE,YAAY;YAAG;YACtB,SAAS;gBAAE,QAAQ;YAAS;YAC5B,cAAc;QAChB;IACF;AACF"}}]
}